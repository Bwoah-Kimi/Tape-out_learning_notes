{"config":{"lang":["zh","en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"Welcome to my Tape-out Learning Notes!","text":"<p>This is the documentation for the tape-out workflow intended for ISSCC '25.</p> <p>Please note that this workflow is tailored to my specific working environment. Due to licensing and copyright constrainsts, I am unable to share all related files here. However, I hope that the content provided here can still be beneficial to you.</p> <p>Disclaimer: This project is currently under development. The accuracy of the documents cannot be fully guaranteed.</p> <p>Because of the complexity of tape-out workflow, the progress of this documentation project is lagging behind. Please be patient!</p> <p>Should you have any questions or concerns regarding the workflow, please raise an issue in my GitHub repository https://github.com/Bwoah-Kimi/Tape-out_learning_notes. I will respond as promptly as possible. :)</p>"},{"location":"0_introduction/","title":"\u6d41\u7247\u6587\u6863\u9605\u8bfb\u8bf4\u660e","text":"<p>\u8be5\u6587\u6863\u65e8\u5728\u4e3a\u6ca1\u6709\u6d41\u7247\u7ecf\u9a8c\u6216\u8005\u5bf9\u6d41\u7247\u6d41\u7a0b\u6709\u4e9b\u751f\u758f\u7684\u540c\u5fd7\u4eec\u63d0\u4f9b\u6570\u5b57\u7535\u8def\u540e\u7aef\u6d41\u7a0b\u7684\u6587\u6863\u53c2\u8003\u3002</p>"},{"location":"0_introduction/#_2","title":"\u6570\u5b57\u7535\u8def\u6d41\u7247\u6d41\u7a0b\u7b80\u4ecb","text":"<p>\u603b\u4f53\u6765\u8bf4\uff0c</p>"},{"location":"1_code_modification_and_simulation_workflow/","title":"\u9762\u5411\u6d41\u7247\u7684XiangShan\u914d\u7f6e\u4e0e\u4eff\u771f","text":"<p>XiangShan\u662f\u4e00\u4e2a\u89c4\u6a21\u5f88\u5927\uff0c\u7248\u672c\u8fed\u4ee3\u5f88\u5feb\u7684\u5f00\u6e90\u9879\u76ee\u3002 \u622a\u6b622024\u5e743\u6708\u5df2\u7ecf\u8fed\u4ee3\u81f3\u7b2c\u4e09\u4e2a\u7248\u672c\uff08\u6606\u660e\u6e56\uff09\uff0c\u9999\u5c71\u56e2\u961f\u5df2\u7ecf\u5b8c\u6210\u4e86\u4e24\u6b21\u6d41\u7247\u3002</p> <p>\u4e3a\u4e86\u5728\u81ea\u5df1\u7684\u6d41\u7247\u5de5\u4f5c\u4e2d\u4f7f\u7528\u9999\u5c71\u5904\u7406\u5668\uff0c\u9700\u8981\u505a\u4e0d\u5c11\u7684\u8c03\u6574\uff0c\u5728\u6b64\u505a\u4e00\u4e9b\u7b80\u8981\u7684\u4ecb\u7ecd\u3002</p> <p>\u603b\u4f53\u4e0a\u6765\u8bf4\uff0c\u5728\u8fdb\u5165\u5b8c\u6574\u7684\u6570\u5b57\u7efc\u5408+\u540e\u7aef\u6d41\u7a0b\u4e4b\u524d\uff0c\u5927\u81f4\u6709\u51e0\u4e2a\u51c6\u5907\u6b65\u9aa4\u3002</p> <ul> <li>\u719f\u6089\u5de5\u7a0b\u73af\u5883\uff1a\u4e86\u89e3\u9999\u5c71\u5927\u81f4\u7684\u4ee3\u7801\u7ed3\u6784\uff0cChisel -&gt; Verilog\u7684\u7f16\u8bd1\u8fc7\u7a0b\u4ee5\u53ca\u53c2\u6570\u914d\u7f6e\u3002</li> <li> <p>\u8c03\u6574\u53c2\u6570\u914d\u7f6e\uff1a\u9999\u5c71\u5904\u7406\u5668\u7528Chisel\u8bed\u8a00\u7f16\u5199\uff0c\u8c03\u6574\u4e00\u4e9b\u7b80\u5355\u7684\u53c2\u6570\u9009\u9879\u5c31\u53ef\u4ee5\u6539\u53d8CPU\u7684\u5fae\u67b6\u6784\uff0c\u4f8b\u5982\u53d1\u5c04\u5bbd\u5ea6\u3001\u53d6\u6307\u5bbd\u5ea6\u3001\u7f13\u5b58\u5927\u5c0f\u7b49\u7b49\u3002\u56e0\u4e3a\u540e\u7eed\u6d41\u7247\u4e0d\u53ef\u80fd\u4f7f\u7528\u5b8c\u6574\u7684\u9999\u5c71\u6838\uff0c\u56e0\u6b64\u9700\u8981\u9002\u5f53\u7f29\u5c0f\u90e8\u5206\u53c2\u6570\u3002\\ \u53e6\u5916\uff0c\u6211\u4eec\u7684\u6d41\u7247\u5de5\u4f5c\u80af\u5b9a\u4e0d\u662f\u76f4\u63a5\u7167\u642c\u9999\u5c71CPU\uff0c\u80af\u5b9a\u4f1a\u5728\u8fd9\u4e4b\u4e0a\u505a\u4e00\u4e9b\u8c03\u6574\u6216\u4fee\u6539\uff0c\u4f8b\u5982\u6307\u4ee4\u96c6\u6269\u5c55\u3001\u529f\u8017\u6216\u65f6\u949f\u7684\u4f18\u5316\uff0c\u7b49\u7b49\u3002\u6839\u636e\u6240\u9700\u7684\u529f\u80fd\uff0c\u53ef\u4ee5\u8003\u8651\u76f4\u63a5\u4fee\u6539Chisel\u4ee3\u7801\uff0c\u6216\u8005\u7f16\u8bd1\u6210Verilog\u4e4b\u540e\u518d\u505a\u8c03\u6574\u3002</p> </li> <li> <p>\u642d\u5efa\u4eff\u771f\u73af\u5883\uff1a\u5728\u4fee\u6539\u8bbe\u8ba1\u7684\u5404\u4e2a\u8282\u70b9\uff0c\u6211\u4eec\u90fd\u5e94\u8be5\u7528\u4eff\u771f\u7a0b\u5e8f\u9a8c\u8bc1\u8bbe\u8ba1\u7684\u6b63\u786e\u6027\u3002\u53ef\u4ee5\u4f7f\u7528\u9999\u5c71\u81ea\u5e26\u7684\u4eff\u771f\u73af\u5883\u8fdb\u884c\u9a8c\u8bc1\uff0c\u4f46\u662f\u9ed8\u8ba4\u7684\u4eff\u771f\u8bbe\u7f6e\u8c03\u7528<code>NEMU</code>\u6307\u4ee4\u6a21\u62df\u5668\u8fdb\u884cDifftest\uff0c\u82e5\u6211\u4eec\u8c03\u6574\u4e86CPU\u7684\u4ee3\u7801\u529f\u80fd\uff0c\u5c31\u9700\u8981\u53bb\u9664Difftest\u9009\u9879\u3002\u53e6\u5916\uff0c\u4e3a\u4e86\u540e\u7eed\u7684FPGA\u9a8c\u8bc1\u4ee5\u53ca\u6d41\u7247\u540e\u6d4b\u8bd5\uff0c\u6211\u4eec\u4e5f\u9700\u8981\u642d\u5efa\u81ea\u5df1\u7684\u4eff\u771f\u4ee5\u53ca\u6d4b\u8bd5\u73af\u5883\u3002</p> </li> </ul>"},{"location":"1_code_modification_and_simulation_workflow/#_1","title":"\u5de5\u7a0b\u73af\u5883\u914d\u7f6e","text":"<ul> <li>\u9999\u5c71\u73af\u5883\u914d\u7f6e\u8f83\u4e3a\u590d\u6742\uff0c\u9700\u8981\u7528\u5230<code>verilator</code>\u3001<code>riscv-toolchain</code>\u7b49\u591a\u4e2a\u5de5\u5177\u4ee5\u53ca\u5927\u91cf\u7684\u4f9d\u8d56\u5305\u3002</li> <li>\u53c2\u8003https://xiangshan-doc.readthedocs.io/zh-cn/latest/tools/xsenv/\u4e2d\u7684\u4ecb\u7ecd\u8fdb\u884c\u64cd\u4f5c\u3002</li> <li>\u9700\u8981\u6ce8\u610f<code>XiangShan</code>\u548c<code>NEMU</code>\u9879\u76ee\u7684\u7248\u672c\u3002</li> <li>\u4e3a\u4e86\u6210\u529f\u5c06Chisel\u7f16\u8bd1\u6210Verilog\u4ee3\u7801\uff0c\u9700\u8981\u5728<code>build.sc</code>\u4e2d\u4fee\u6539\u5185\u5b58\u9650\u5236\uff0c\u8be6\u89c1https://github.com/OpenXiangShan/XiangShan/issues/891</li> </ul> <pre><code>override def forkArgs = Seq(\"-Xmx15G\", \"-Xss256m\")\n</code></pre>"},{"location":"1_code_modification_and_simulation_workflow/#cache","title":"\u4fee\u6539Cache\u5927\u5c0f","text":"<p>\u56e0\u4e3a\u5b66\u672f\u6d41\u7247\u7684\u9650\u5236\u4ee5\u53ca\u7528\u9014\uff0c\u6211\u4eec\u4e0d\u9700\u8981\u5b9e\u73b0\u5b8c\u6574\u7684\u9999\u5c71\u6838\uff0c\u53ef\u4ee5\u9002\u5f53\u51cf\u5c0f\u4e00\u4e9b\u53c2\u6570\u914d\u7f6e\uff0c\u4ee5\u51cf\u5c0f\u7248\u56fe\u9762\u79ef\u4ee5\u53ca\u5b9e\u73b0\u7684\u96be\u6613\u7a0b\u5ea6\u3002</p> <p>\u9999\u5c71\u56e2\u961f\u5728 <code>./src/main/scala/top/Config.scala</code>\u4e2d\u63d0\u4f9b\u4e86\u4e00\u4e9b\u53c2\u6570\u914d\u7f6e\u9009\u9879\u3002\u53ef\u4ee5\u53c2\u8003<code>MinimalConfig</code>\u8fdb\u884c\u5176\u4ed6\u81ea\u5b9a\u4e49\u7684\u914d\u7f6e\u3002</p> <p>\u5728\u751f\u6210Verilog\u4ee3\u7801/\u4eff\u771f\u65f6\u53ef\u4ee5\u6dfb\u52a0\u9009\u9879<code>CONFIG=MyConfig</code>\u6765\u6307\u5b9a\u9009\u62e9\u7684\u914d\u7f6e\uff0c\u5177\u4f53\u8be6\u89c1https://xiangshan-doc.readthedocs.io/zh-cn/latest/misc/config/</p> <p>\u7531\u4e8e<code>MinimalConfig</code>\u4e2d\u7684\u7f13\u5b58\u5927\u5c0f\u5bf9\u4e8e\u6d41\u7247\u6765\u8bb2\u592a\u5927\uff0c\u6211\u4eec\u9700\u8981\u53bb\u9664\u7f13\u5b58/\u51cf\u5c0f\u7f13\u5b58\u7684\u5927\u5c0f * dcache (32KB) \u76f8\u5173\u53c2\u6570\u914d\u7f6e\u5728<code>./src/main/scala/xiangshan/cache/dcache/DCacheWrapper.scala</code></p> <pre><code>nSets: Int = 32, \nnWays: Int = 4,\nrowBits: Int = 64,\n</code></pre> <ul> <li>icache(8KB) \u76f8\u5173\u53c2\u6570\u914d\u7f6e\u5728<code>./src/main/scala/xiangshan/frontend/icache/ICache.scala</code></li> </ul> <pre><code>nSets: Int = 32,\nnWays: Int = 4,\nrowBits: Int = 64,\n</code></pre> <ul> <li>\u5c06dcache\u4e0eicache\u5747\u4ece<code>nSets = 64</code>\u4fee\u6539\u4e3a\uff1a<code>nSets = 32</code></li> <li>\u4fee\u6539<code>MinimalConfig</code>\u4e2d<code>nSets</code>\u7684\u53c2\u6570\u5927\u5c0f\uff0c\u4f7f\u5f97L3\u5927\u5c0f\u51cf\u5c0f\u81f364KB\uff0cL2\u7684\u5927\u5c0f\u51cf\u5c0f\u81f364KB\u3002</li> </ul>"},{"location":"1_code_modification_and_simulation_workflow/#_2","title":"\u4fee\u6539\u9999\u5c71\u4ee3\u7801","text":"<p>\u6b64\u5904\u6839\u636e\u81ea\u5df1\u7684\u7814\u7a76\u76ee\u6807\u9002\u5f53\u4fee\u6539\u9999\u5c71\u4ee3\u7801\uff0c\u4e0d\u518d\u8d58\u8ff0\u3002\u5e94\u5f53\u9636\u6bb5\u6027\u8fdb\u884c\u4eff\u771f\u9a8c\u8bc1\uff0c\u786e\u4fdd\u8bbe\u8ba1\u6b63\u786e\u6027\u3002</p>"},{"location":"1_code_modification_and_simulation_workflow/#verilog","title":"\u751f\u6210Verilog\u4ee3\u7801","text":"<ul> <li><code>make verilog</code>\u751f\u6210\u53ef\u7efc\u5408\u7684\u5355\u6838\u4ee3\u7801<ul> <li>\u8f93\u51fa\u7684\u6587\u4ef6\u5728<code>XiangShan/build/XSTop.v</code></li> <li>\u53bb\u9664\u4e86Difftest\u7b49\u4eff\u771f\u7528\u7684\u8c03\u8bd5\u6a21\u5757</li> </ul> </li> <li><code>make sim-verilog</code>\u751f\u6210\u7528\u4e8e\u4eff\u771f\u7684Verilog\u6587\u4ef6\uff0c\u82e5\u540e\u7eed\u4f7f\u7528vcs\u4eff\u771f\uff0c\u53ef\u4f7f\u7528<code>make simv</code></li> <li><code>make emu</code>\u7528\u4e8e\u751f\u6210Verilator\u4eff\u771f\u7a0b\u5e8f</li> </ul>"},{"location":"1_code_modification_and_simulation_workflow/#chisel-verilog","title":"\u52a0\u901fChisel -&gt; Verilog\u7f16\u8bd1\u901f\u5ea6","text":"<ul> <li>\u53c2\u8003https://xiangshan-doc.readthedocs.io/zh-cn/latest/tools/compile-and-sim/</li> <li>\u4f7f\u7528CIRCT\u4ee3\u66ff\u9ed8\u8ba4\u7684Scala Firrtl Compiler\u7f16\u8bd1\u9999\u5c71<ul> <li>\u5728\u672c\u5730\u4ece\u6e90\u7801\u7f16\u8bd1CIRCT\uff0c\u9700\u8981\u5c06\u7f16\u8bd1\u9009\u9879\u4e2dDEBUG\u66f4\u6362\u6210Release</li> <li>\u5c06circt/bin\u8def\u5f84\u6dfb\u52a0\u5230PATH\u73af\u5883\u53d8\u91cf\u4e2d</li> <li>\u5728make\u547d\u4ee4\u65f6\u52a0\u4e0a<code>MFC=1</code></li> </ul> </li> <li>\u6307\u5b9a\u7f16\u8bd1\u65f6\u7684\u6838\u6570\uff0c<code>-jN</code>\uff0c\u5176\u4e2dN\u4e3a\u6838\u6570</li> </ul>"},{"location":"1_code_modification_and_simulation_workflow/#verilog_1","title":"\u4e3a\u6d41\u7247\u8c03\u6574Verilog\u4ee3\u7801","text":""},{"location":"1_code_modification_and_simulation_workflow/#_3","title":"\u5206\u677f\u5757\u8fdb\u884c\u6570\u5b57\u6d41\u7a0b","text":"<p>\u7531Chisel\u751f\u6210\u7684Verilog\u4ee3\u7801\u5728<code>XSTop.v</code>\uff0c\u6ca1\u6709\u4efb\u4f55\u7684\u53ef\u8bfb\u6027\u53ef\u8a00\u3002 \u4e07\u5e78\u7684\u662f\uff0c\u9999\u5c71\u56e2\u961f\u5728<code>./scripts</code>\u63d0\u4f9b\u4e86\u51e0\u4e2a\u811a\u672c\uff0c\u8fd0\u884c<code>generate_all.sh</code>\u5c06Verilog\u4ee3\u7801\u5206\u6210\u51e0\u4e2a\u677f\u5757\uff08\u4f8b\u5982L3 Cache\u3001\u6267\u884c\u5355\u5143\uff09\uff0c\u5e76\u4e14\u5c06\u6bcf\u4e2aVerilog\u6a21\u5757\u5206\u6210\u5355\u72ec\u7684\u6587\u4ef6\u3002 \u5728\u8fdb\u884c\u7efc\u5408\u3001\u540e\u7aef\u7b49\u6570\u5b57\u6d41\u7a0b\u65f6\uff0c\u5206\u6210\u51e0\u4e2a\u6a21\u5757\u8fdb\u884c\u66f4\u4e3a\u5408\u7406\u3002\u82e5\u4e00\u4e2a\u8bbe\u8ba1\u7684\u89c4\u6a21\u8fc7\u5927\u3001\u590d\u6742\u6027\u592a\u9ad8\uff0c\u5f88\u96be\u5f97\u5230\u8f83\u597d\u7684\u6548\u679c\u3002</p>"},{"location":"1_code_modification_and_simulation_workflow/#sramregister-file","title":"\u66ff\u6362SRAM\u3001Register File","text":"<p>\u751f\u6210\u7684Verilog\u4ee3\u7801\u4e2d\uff0c\u6709\u51e0\u5341\u4e2a<code>array_xxx_ext.v</code>\u6587\u4ef6\uff0c\u88ab\u7528\u4e8eDCache\u3001ICache\u7b49\u5bc4\u5b58\u5668\u5806\u548c\u9ad8\u901f\u7f13\u5b58\u3002 \u8fd9\u4e9b\u9635\u5217\u9700\u8981\u7528<code>SRAM Compiler</code>\u3001<code>Register File Compiler</code>\u66ff\u6362\u6210\u4e13\u95e8\u7684IP\u6838\uff0c\u80fd\u591f\u663e\u8457\u51cf\u5c0f\u8bbe\u8ba1\u7684\u9762\u79ef\u3002</p>"},{"location":"1_code_modification_and_simulation_workflow/#_4","title":"\u521d\u6b65\u4eff\u771f\u9a8c\u8bc1","text":""},{"location":"1_code_modification_and_simulation_workflow/#verilator","title":"\u4f7f\u7528Verilator","text":"<ul> <li> <p>\u4f7f\u7528\u9999\u5c71\u81ea\u5e26\u7684\u5f00\u53d1\u73af\u5883\uff0c\u53ef\u4ee5\u7528Verilator\u521d\u6b65\u9a8c\u8bc1\u8bbe\u8ba1\u662f\u5426\u6b63\u786e\u3002</p> </li> <li> <p><code>./build/emu -i WORKLOAD_BIN.bin</code></p> </li> </ul>"},{"location":"1_code_modification_and_simulation_workflow/#vcs","title":"\u4f7f\u7528VCS","text":"<ul> <li>\u53c2\u8003https://xiangshan-doc.readthedocs.io/zh-cn/latest/tools/vcs/</li> <li><code>make simv CONFIG=MyConfig Release=1</code>\u53ef\u4ee5\u751f\u6210\u7528\u4e8e\u4eff\u771f\u7684<code>SimTop.v</code>\uff0c\u7531\u4e8e\u672c\u5730\u7cfb\u7edf\u65e0\u6cd5\u8fd0\u884cVCS\uff0c\u4f7f\u7528\u8be5make\u547d\u4ee4\u65e0\u6cd5\u751f\u6210simv\u53ef\u6267\u884c\u6587\u4ef6\u3002</li> <li>\u4f7f\u7528\u91cd\u5b9a\u5411\u8f93\u51fa\u4fdd\u5b58<code>vcs</code>\u547d\u4ee4\uff0c\u5728\u652f\u6301VCS\u7684\u73af\u5883\u4e2d\u91cd\u65b0\u8fd0\u884c\u8be5\u547d\u4ee4\uff0c\u4ece\u800c\u751f\u6210<code>simv</code>\u53ef\u6267\u884c\u6587\u4ef6\u3002</li> <li>\u8fd0\u884c<code>simv</code>\uff0c\u5e76\u6307\u5b9a\u8d1f\u8f7d\u7a0b\u5e8f</li> <li>\u4f7f\u7528Verdi\u6216\u5176\u4ed6\u7a0b\u5e8f\u67e5\u770b\u6ce2\u5f62\uff0c\u68c0\u67e5\u6b63\u786e\u6027</li> </ul>"},{"location":"1_code_modification_and_simulation_workflow/#_5","title":"\u6d41\u7247\u73af\u5883\u4eff\u771f\u9a8c\u8bc1","text":"<p>\u9999\u5c71\u81ea\u5e26\u7684\u4eff\u771f\u7a0b\u5e8f\u4e2d\u8c03\u7528\u4e86\u5927\u91cf\u7684C\u51fd\u6570\uff0c\u4f8b\u5982<code>SimJTag</code>\uff0c<code>SimMMIO</code>\u7b49\u65e0\u6cd5\u7efc\u5408\u7684\u6a21\u5757\u3002 \u5728\u4e3aFPGA\u9a8c\u8bc1\u4ee5\u53ca\u6d41\u7247\u51c6\u5907\u7684\u7248\u672c\u4e2d\uff0c\u9700\u8981\u5c06\u6240\u6709\u4e0d\u53ef\u7efc\u5408\u3001\u8c03\u7528C\u4ee3\u7801\u7684\u51fd\u6570\u53bb\u9664\uff0c\u5269\u4e0b\u53ef\u7efc\u5408\u7684\u88f8\u6838\uff0c\u4ee5\u53ca\u6d4b\u8bd5\u6240\u9700\u7684\u5fc5\u8981\u6a21\u5757\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u9999\u5c71\u56e2\u961f\u5728\u9ed8\u8ba4\u7684\u8bbe\u7f6e\u9009\u9879\u4e2d\u4fdd\u7559\u4e86\u4e00\u90e8\u5206\u57fa\u672c\u7684Difftest\u6a21\u5757\uff0c\u9700\u8981\u5728<code>Parameters.scala</code>\u4e2d\u53bb\u9664\u76f8\u5e94\u7684\u9009\u9879\u3002</p> <p>\u901a\u8fc7<code>grep -rn \"DPI-C\"</code>\u53ef\u4ee5\u67e5\u770b\u4ee3\u7801\u4e2d\u662f\u5426\u6709\u8c03\u7528C\u51fd\u6570\u3002</p>"},{"location":"1_code_modification_and_simulation_workflow/#_6","title":"\u90e8\u5206\u57fa\u7840\u6982\u5ff5\u4ecb\u7ecd","text":"<p>\u642d\u5efa\u81ea\u5df1\u7684\u4eff\u771f\u9a8c\u8bc1\u73af\u5883\u6d89\u53ca\u5230\u4e00\u4e9b\u8f6f\u786c\u4ef6\u6982\u5ff5\uff0c\u5728\u6b64\u7b80\u5355\u4ecb\u7ecd\u3002</p> <ul> <li>DMA<ul> <li>Direct Memory Access (DMA)\uff0c\u76f4\u63a5\u5185\u5b58\u8bbf\u95ee\uff0c\u662f\u4e00\u79cd\u5728\u8ba1\u7b97\u673a\u7cfb\u7edf\u4e2d\uff0c\u5141\u8bb8\u67d0\u4e9b\u786c\u4ef6\u5b50\u7cfb\u7edf\u5728\u4e3b\u5185\u5b58\u548c\u8bbe\u5907\u4e4b\u95f4\u76f4\u63a5\u4f20\u8f93\u6570\u636e\uff0c\u800c\u65e0\u9700\u901a\u8fc7CPU\u8fdb\u884c\u4e2d\u8f6c\u7684\u6280\u672f</li> </ul> </li> <li>MMIO<ul> <li>MMIO\u5168\u79f0\u4e3aMemory Mapped I/O\uff08\u5185\u5b58\u6620\u5c04\u8f93\u5165/\u8f93\u51fa\uff09\uff0c\u662f\u4e00\u79cd\u5728\u8ba1\u7b97\u673a\u7cfb\u7edf\u4e2d\uff0c\u5141\u8bb8CPU\u4f7f\u7528\u5185\u5b58\u8bbf\u95ee\u6307\u4ee4\uff08\u5982LOAD\u548cSTORE\uff09\u6765\u8bbf\u95ee\u8bbe\u5907\u7684\u65b9\u6cd5\u3002</li> <li>\u5728\u8fd9\u79cd\u65b9\u6cd5\u4e2d\uff0c\u8bbe\u5907\u7684\u5bc4\u5b58\u5668\u88ab\u6620\u5c04\u5230\u7cfb\u7edf\u7684\u5730\u5740\u7a7a\u95f4\u4e2d\uff0c\u5c31\u50cf\u666e\u901a\u7684\u5185\u5b58\u5355\u5143\u4e00\u6837\u3002</li> <li>\u5f53CPU\u5411\u8fd9\u4e9b\u7279\u6b8a\u7684\u5185\u5b58\u5730\u5740\u5199\u5165\u6570\u636e\u65f6\uff0c\u5b83\u5b9e\u9645\u4e0a\u662f\u5411\u8bbe\u5907\u7684\u5bc4\u5b58\u5668\u5199\u5165\u6570\u636e\uff1b\u5f53CPU\u4ece\u8fd9\u4e9b\u5730\u5740\u8bfb\u53d6\u6570\u636e\u65f6\uff0c\u5b83\u5b9e\u9645\u4e0a\u662f\u4ece\u8bbe\u5907\u7684\u5bc4\u5b58\u5668\u8bfb\u53d6\u6570\u636e\u3002\u8fd9\u79cd\u65b9\u5f0f\u4f7f\u5f97CPU\u53ef\u4ee5\u4f7f\u7528\u76f8\u540c\u7684\u6307\u4ee4\u96c6\u6765\u8bbf\u95ee\u5185\u5b58\u548c\u8bbe\u5907\uff0c\u4ece\u800c\u7b80\u5316\u4e86\u786c\u4ef6\u548c\u8f6f\u4ef6\u7684\u8bbe\u8ba1\u3002</li> </ul> </li> </ul>"},{"location":"1_code_modification_and_simulation_workflow/#_7","title":"\u63a5\u53e3\u4ecb\u7ecd","text":"<p><code>XSTop.v</code>\u662f\u7ecf\u8fc7\u7f16\u8bd1\u4e4b\u540e\u7684\u5904\u7406\u5668Verilog\u4ee3\u7801\uff0c\u5373\u53ef\u7efc\u5408\u7684\u88f8\u6838\u3002\u5904\u7406\u5668\u6838\u5bf9\u5916\u66b4\u9732\u51fa\u4e86\u51e0\u5957\u63a5\u53e3\uff0c\u5728\u6b64\u8bb0\u5f55\u3002\\ * dma\uff1a\u4e00\u5957AXI\u63a5\u53e3\uff0c\u6ca1\u6709\u4f7f\u7528</p> <pre><code>l_soc.module.dma &lt;&gt; 0.U.asTypeOf(l_soc.module.dma)\n</code></pre> <ul> <li>Peripheral\uff1a\u4e00\u5957AXI\u63a5\u53e3\uff0cCPU\u4e3aMaster\uff0cPeripheral\u4e3aSlave\u3002SoC\u7684Peripheral\u6a21\u5757\u5728SimTop\u4e2d\u901a\u8fc7AXI4\u8fde\u63a5\u5230SimMMIO\u4e2d\u3002XSTop\u5728reset\u7ed3\u675f\u4e4b\u540e\u4f1a\u4ece0x1000_0000\u4f4d\u7f6e\u8bfb\u53d6\u6307\u4ee4\uff0c\u6700\u7ec8\u8df3\u8f6c\u5230\u4e3b\u5b58\u4e0a\u6267\u884c\u7a0b\u5e8f\u3002<ul> <li>auto_out_3: intrGen</li> <li>auto_out_2: SD</li> <li>auto_out_1: FLASH (boot address: 0x1000_0000)</li> <li>auto_out_0: UART</li> </ul> </li> </ul> <pre><code>val l_simMMIO = LazyModule(new SimMMIO(l_soc.misc.peripheralNode.in.head._2))\nval simMMIO = Module(l_simMMIO.module)\nl_simMMIO.io_axi4 &lt;&gt; soc.peripheral\n</code></pre> <ul> <li>memory\uff1a\u4e00\u5957AXI\u63a5\u53e3\uff0cCPU\u4e3aMaster\uff0cMemory\u4e3aSlave\u3002Memory\u6a21\u5757\u5728SoC\u6a21\u5757\u4e2d\u901a\u8fc7AXI4\u63a5\u53e3\u8fde\u63a5\u5230\u6838\u4e0a</li> </ul> <pre><code>val simAXIMem = Module(l_simAXIMem.module)\nl_simAXIMem.io_axi4 &lt;&gt; soc.memory\n</code></pre> <p><code>SimTop.v</code>\u662f\u4f7f\u7528\u9999\u5c71\u4eff\u771f\u73af\u5883\u6240\u751f\u6210\u7684SoC Verilog\u4ee3\u7801\u3002\u4e3a\u66ff\u6362\u6210\u81ea\u5df1\u7684\u4eff\u771f\u9a8c\u8bc1\u73af\u5883\uff0c\u6211\u4eec\u9700\u8981\u5728\u6b64\u57fa\u7840\u4e0a\u8fdb\u884c\u4fee\u6539\u3002</p> <p><code>SimTop.v</code>\u5bf9\u5916\u66b4\u9732\u7684\u63a5\u53e3\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>  val io = IO(new Bundle() {\n    val logCtrl = new LogCtrlIO\n    val perfInfo = new PerfInfoIO\n    val uart = new UARTIO\n  })\n</code></pre> <pre><code>module SimTop(\n  input         clock,\n  input         reset,\n  input  [63:0] io_logCtrl_log_begin,\n  input  [63:0] io_logCtrl_log_end,\n  input  [63:0] io_logCtrl_log_level,\n  input         io_perfInfo_clean,\n  input         io_perfInfo_dump,\n  output        io_uart_out_valid,\n  output [7:0]  io_uart_out_ch,\n  output        io_uart_in_valid,\n  input  [7:0]  io_uart_in_ch\n);\n</code></pre> <p>\u5728\u53ef\u7efc\u5408\u7684<code>XSTop.v</code>\u7684\u57fa\u7840\u4e0a\uff0c\u6211\u4eec\u901a\u8fc7\u6838\u66b4\u9732\u51fa\u6765\u7684\u4e24\u5957AXI\u63a5\u53e3\uff0c\u5206\u522b\u63a5\u5230BootROM\u548c\u4e3b\u5b58Memory\u4e0a\u3002</p> <p>BootROM\u6838Memory\u4e0a\u7684\u5185\u5bb9\u9700\u8981\u81ea\u884c\u914d\u7f6e\u3002</p> <p>\u53e6\u5916\uff0c\u6211\u4eec\u628a\u6838\u66b4\u9732\u51fa\u6765\u7684JTAG\u63a5\u53e3\u8fde\u5230SoC\u6a21\u5757\u7684IO\u4e0a\uff0c\u7528\u4e8e\u540e\u7eedFPGA\u8c03\u8bd5\u3002</p>"},{"location":"1_code_modification_and_simulation_workflow/#vcs_1","title":"VCS\u4eff\u771f\u9a8c\u8bc1","text":"<p>\u5728\u4f7f\u7528FPGA\u4e0a\u677f\u9a8c\u8bc1\u4e4b\u524d\uff0c\u4f7f\u7528\u53ef\u8c03\u8bd5\u6027\u66f4\u5f3a\u3001\u4eff\u771f\u901f\u5ea6\u66f4\u5feb\u7684\u7684VCS\u8fdb\u884c\u884c\u4e3a\u7ea7\u4eff\u771f\u9a8c\u8bc1\uff0c\u786e\u4fddBootRom\u548cMemory\u53ef\u4ee5\u6b63\u5e38\u4f7f\u7528\u3002</p>"},{"location":"1_code_modification_and_simulation_workflow/#verdi","title":"Verdi\u67e5\u770b\u6ce2\u5f62","text":""},{"location":"2_FPGA_verification_workflow/","title":"FPGA\u9a8c\u8bc1","text":"<p>\u4f7f\u7528Xilinx Vivado 2019.1\u8fdb\u884cFPGA\u9a8c\u8bc1\u3002</p>"},{"location":"2_FPGA_verification_workflow/#fpga_1","title":"FPGA\u6d41\u7a0b\u7b80\u4ecb","text":"<p>\u5728\u5b8c\u6210RTL\u4ee3\u7801\u8bbe\u8ba1\u4e4b\u540e\uff0c\u53ef\u4ee5\u8fdb\u5165FPGA\u9a8c\u8bc1\u6d41\u7a0b\uff0c\u5927\u81f4\u5206\u4e3a\u4ee5\u4e0b\u51e0\u4e2a\u9636\u6bb5\uff1a</p>"},{"location":"2_FPGA_verification_workflow/#_1","title":"\u5bfc\u5165\u8bbe\u8ba1","text":"<p>\u6253\u5f00Vivado\uff0c\u9009\u62e9<code>Create Project</code>\uff0c\u9009\u62e9\u5408\u9002\u7684\u5de5\u7a0b\u540d\u5b57\u548c\u8def\u5f84\u3002\u5982\u679c\u662f\u5728\u672c\u5730\u8fd0\u884c\uff0c\u5c3d\u91cf\u907f\u514d\u4e2d\u6587\u8def\u5f84\uff0c\u5426\u5219Vivado\u540e\u7eed\u53ef\u80fd\u62a5\u9519\u3002</p> <p>\u9009\u62e9<code>RTL Project</code>\uff0c\u8fde\u7eed\u9009\u62e9<code>Next</code>\uff0c\u5728<code>Default Part</code>\u9009\u62e9\u9a8c\u8bc1\u6240\u4f7f\u7528\u7684FPGA\u6838\u5fc3\u677f\u578b\u53f7</p> <p>\u5b8c\u6210\u5de5\u7a0b\u521b\u5efa\u5411\u5bfc\u4e4b\u540e\u5373\u53ef\u8fdb\u5165Vivado\u4e3b\u754c\u9762\u3002\u5728<code>PROJECT MANAGER</code> -&gt; <code>Sources</code>\u6dfb\u52a0RTL\u4ee3\u7801 </p> <p>\u5728\u5f39\u51fa\u754c\u9762\u4e2d\u9009\u62e9<code>Add or create design sources</code> -&gt; <code>Add Files</code>\u5373\u53ef\u5bfc\u5165\u8bbe\u8ba1\u3002</p>"},{"location":"2_FPGA_verification_workflow/#_2","title":"\u7f16\u5199\u4eff\u771f\u7a0b\u5e8f","text":"<p>\u4e3a\u4e86\u9a8c\u8bc1RTL\u4ee3\u7801\u662f\u5426\u6b63\u786e\uff0c\u9700\u8981\u7528Verilog\u6216SystemVerilog\u7f16\u5199\u4e00\u4e2aTestbench\uff0c\u901a\u8fc7\u89c2\u5bdf\u6ce2\u5f62\u9a8c\u8bc1\u8bbe\u8ba1\u662f\u5426\u7b26\u5408\u9700\u6c42\u3002</p> <p>\u4e00\u4e2a\u7b80\u5355\u7684Testbench\u5927\u81f4\u5982\u4e0b\u3002</p> <pre><code>module tb_top();\n\nreg clock;\nreg reset;\n\ninitial begin\n    clock = 0;\n    reset = 1\n    #100 reset = 0;\n    #2000000 $finish;\nend\nalways begin\n    #1 clock &lt;= ~clock;\nend \n\nMySimTop dut(\n    .clock(clock),\n    .reset(reset)\n);\n\nendmodule\n</code></pre>"},{"location":"2_FPGA_verification_workflow/#behavioral-simulation","title":"Behavioral Simulation \u884c\u4e3a\u4eff\u771f","text":"<p>\u5bf9RTL\u4ee3\u7801\u7f16\u8bd1\u4e4b\u540e\u5373\u53ef\u8fdb\u884c\u7684\u4eff\u771f\uff0c\u7528\u4e8e\u9a8c\u8bc1\u903b\u8f91\u529f\u80fd\u7684\u6b63\u786e\u6027\u3002 \u5728\u903b\u8f91\u7efc\u5408\u524d\u9700\u8981\u8fdb\u884c\u529f\u80fd\u4eff\u771f\uff0c\u4ee5\u4fbf\u5c3d\u65e9\u53d1\u73b0\u8bbe\u8ba1\u4e2d\u7684\u7f3a\u9677\u3002</p>"},{"location":"2_FPGA_verification_workflow/#synthesis","title":"Synthesis \u903b\u8f91\u7efc\u5408","text":"<p>\u5728\u8fdb\u884c\u903b\u8f91\u7efc\u5408\u4e4b\u524d\uff0c\u9700\u8981\u9884\u5148\u9009\u5b9a\u76ee\u6807\u7684FPGA\u5e73\u53f0\u3002\u7efc\u5408\u5de5\u5177\u4f1a\u6839\u636eFPGA\u6838\u5fc3\u6240\u5305\u542b\u7684LUT\u3001BRAM\u7b49\u8d44\u6e90\u5bf9\u786c\u4ef6\u8bbe\u8ba1\u8fdb\u884c\u903b\u8f91\u7efc\u5408\u3002</p> <p>\u5728\u5b8c\u6210\u903b\u8f91\u7efc\u5408\u4e4b\u540e\uff0c\u4f1a\u7ed9\u51fa\u95e8\u7ea7\u7f51\u8868\u7684\u5404\u7c7b\u4fe1\u606f\uff0c\u5305\u62ec\u786c\u4ef6\u8bbe\u8ba1\u6240\u4f7f\u7528\u7684FPGA\u8d44\u6e90\u3002</p> <p>\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u8be5\u8bbe\u8ba1\u6240\u9700\u8981\u7684\u786c\u4ef6\u8d44\u6e90\u8d85\u8fc7\u4e86FPGA\u6838\u5fc3\u7684\u9650\u5236\uff0c\u65e0\u6cd5\u5728\u5355\u4e2aFPGA\u82af\u7247\u4e2d\u5b9e\u73b0\u3002 </p>"},{"location":"2_FPGA_verification_workflow/#block-ram","title":"\u66ff\u6362Block RAM","text":"<p>\u5728\u51fa\u73b0LUT\u7684\u8d44\u6e90\u5360\u7528\u8fc7\u591a\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u8003\u8651\u5c06\u786c\u4ef6\u8bbe\u8ba1\u4e2d\u5927\u5757\u7684\u7f13\u5b58\u548c\u5b58\u50a8\u5355\u5143\u7528Vivado\u5de5\u5177\u63d0\u4f9b\u7684Block RAM IP\u6838\u66ff\u6362\uff0c\u53ef\u4ee5\u907f\u514d\u7528LUT\u76f4\u63a5\u7efc\u5408\uff0c\u4ece\u800c\u51cf\u5c11LUT\u7684\u5229\u7528\u7387\u3002</p>"},{"location":"2_FPGA_verification_workflow/#implementation-place-route","title":"Implementation Place &amp; Route\u5b9e\u73b0","text":"<p>\u5728\u903b\u8f91\u7efc\u5408\u4e4b\u540e\uff0c\u9700\u8981\u57fa\u4e8e\u95e8\u7ea7\u7f51\u8868\u8fdb\u884c\u5e03\u5c40\u5e03\u7ebf\uff0c\u5f97\u5230\u786c\u4ef6\u8bbe\u8ba1\u5728FPGA\u82af\u7247\u4e0a\u7684\u7269\u7406\u5b9e\u73b0\u3002</p> <p>\u5e03\u5c40\u5e03\u7ebf\u5b8c\u6210\u4e4b\u540e\uff0cFPGA\u8d44\u6e90\u5229\u7528\u7387\u4f1a\u6709\u6240\u53d8\u5316\uff0c\u8fd9\u662f\u56e0\u4e3a\u5728\u5e03\u5c40\u5e03\u7ebf\u7684\u8fc7\u7a0b\u4e2d\u4f1a\u6539\u53d8\u903b\u8f91\u5355\u5143\u7684\u4f4d\u7f6e\uff0c\u5bfc\u81f4LUT\u7b49\u8d44\u6e90\u7684\u4f7f\u7528\u4ea7\u751f\u53d8\u5316\u3002</p>"},{"location":"2_FPGA_verification_workflow/#generate-bitstream","title":"Generate Bitstream","text":"<p>\u5728\u5e03\u5c40\u5e03\u7ebf\u5b8c\u6210\u4e4b\u540e\uff0c\u9700\u8981\u751f\u6210\u6bd4\u7279\u6d41\uff0c\u8fde\u63a5FPGA\u677f\uff0c\u5e76\u628a\u76f8\u5e94\u7684\u4ee3\u7801\u5f55\u5165\u5230FPGA\u6838\u5fc3\u4e4b\u4e2d\uff0c\u5b9e\u73b0\u786c\u4ef6\u903b\u8f91\u7684\u91cd\u6784\u3002</p>"},{"location":"3_genus_synthesis_workflow/","title":"Genus Workflow","text":"<p>\u6b64\u5904\u4ecb\u7ecd\u4e86Cadance Genus\u7684\u6570\u5b57\u7efc\u5408\u6d41\u7a0b\uff0c\u4e3b\u8981\u6d89\u53ca\u5230\u4e00\u4e9b\u57fa\u672c\u7684\u811a\u672c\u4fee\u6539\u3002</p>"},{"location":"3_genus_synthesis_workflow/#sramregister-file","title":"SRAM/Register File\u66ff\u6362","text":"<p>\u7531\u4e8e\u8bb8\u591a\u6570\u5b57\u6a21\u5757\u4e2d\u4f9d\u8d56\u4e8e\u8f83\u5927\u89c4\u6a21\u7684\u5bc4\u5b58\u5668\u5806/SRAM\u9ad8\u901f\u7f13\u5b58\uff0c\u8fd9\u4e9b\u6a21\u5757\u9700\u8981\u66ff\u6362\u6210\u4e13\u95e8\u7684IP\u6838\uff0c\u800c\u4e0d\u662f\u4f7f\u7528RTL\u4ee3\u7801\u76f4\u63a5\u7efc\u5408\uff0c\u4ece\u800c\u53ef\u4ee5\u663e\u8457\u51cf\u5c0f\u6a21\u5757\u9762\u79ef\u3002</p> <p>\u4e3b\u8981\u7528\u5230\u7684\u662fARM\u63d0\u4f9b\u7684<code>SRAM Compiler</code>\u548c<code>Register File Compiler</code></p> <p>\u5728<code>./scripts/sram/</code>\u6587\u4ef6\u5939\u4e0b\u65b0\u5efa\u6587\u4ef6\u5939\uff0c\u5e76\u5728\u8be5\u6587\u4ef6\u5939\u4e0b\u542f\u52a8<code>SRAM Compiler</code>/<code>Register File Compiler</code>\uff0c\u7528\u4e8e\u5b58\u653e\u751f\u6210\u7684\u6587\u4ef6\u3002</p>"},{"location":"3_genus_synthesis_workflow/#sram-compiler","title":"SRAM Compiler","text":"<p>\u5e38\u89c4\u4f7f\u7528\u7684\u662fARM\u63d0\u4f9b\u7684<code>High Density Single Port SRAM SHVT MVT Compiler</code> </p> <p>\u90e8\u5206\u5e38\u89c1\u7684\u8bbe\u7f6e\u9009\u9879\u5982\u4e0b\uff1a</p> <ul> <li><code>Number of Words</code>: SRAM\u7684\u6df1\u5ea6</li> <li><code>Number of Bits</code>: SRAM\u7684\u5bbd\u5ea6</li> <li><code>Multiplexer Width</code>, <code>Number of Banks</code>\u4f1a\u5f71\u54cd\u6700\u7ec8SRAM\u7684\u5f62\u72b6\uff0c\u4e5f\u53d7\u5230\u6570\u636e\u6df1\u5ea6\u4e0e\u5bbd\u5ea6\u7684\u5f71\u54cd\u3002\u5728\u67d0\u4e9b\u6df1\u5ea6\u4e0e\u5bbd\u5ea6\u7684\u7ec4\u5408\u4e0b\uff0c\u53ef\u80fd\u65e0\u6cd5\u627e\u5230\u4e00\u4e2a\u5408\u6cd5\u7684MUX\u4e0eBank\u6570\u7ec4\u5408\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u53ef\u4ee5\u8003\u8651\u5c06SRAM\u7684\u5bbd\u5ea6\u51cf\u534a\uff0c\u5206\u5f00\u751f\u6210\u3002</li> <li><code>Frequency</code>\u4fdd\u6301\u4e0e\u6574\u4f53\u8bbe\u8ba1\u7684\u65f6\u949f\u5468\u671f\u4e00\u81f4\u3002</li> <li><code>Bit Write Mask</code>\u5141\u8bb8\u4f60\u5728\u5199\u5165\u6570\u636e\u65f6\u9009\u62e9\u6027\u5730\u66f4\u65b0\u7279\u5b9a\u7684\u4f4d\uff0c\u800c\u4e0d\u7528\u66f4\u65b0\u6574\u4e2a\u5b57\uff08Word\uff09\u3002\u4e3a\u6b64\u6211\u4eec\u9700\u8981 \u751f\u6210\u5355\u72ec\u7684\u63a9\u7801\uff08Mask\uff09\u4fe1\u53f7\u6765\u63a7\u5236\u5728\u6bcf\u6b21\u5199\u5165SRAM\u65f6\u60f3\u8981\u5bf9\u54ea\u51e0\u4f4d\u8fdb\u884c\u64cd\u4f5c\u3002</li> </ul> <p>\u5728\u6211\u4eec\u81ea\u5df1\u7684\u6a21\u5757\u4e2d\u4f7f\u7528SRAM Compiler\u751f\u6210\u7684\u5355\u5143\uff0c\u9700\u8981\u751f\u6210\u76f8\u5e94\u7684\u6587\u4ef6\u3002</p> <ul> <li>\u5728<code>views</code>\u90e8\u5206\u9009\u62e9<code>LEF Footprint</code>, <code>LVS Netlist</code>, <code>Liberty Model</code>, <code>Verilog Model</code></li> </ul> <p></p> <ul> <li>\u5728<code>Corners</code>\u83dc\u5355\u4e2d\u52fe\u9009\u6240\u6709\u7684DOMAINS\u4e0ePROCESSES\uff0c\u4ee5\u4fdd\u8bc1\u751f\u6210\u7efc\u5408\u62a5\u544a\u7684\u5b8c\u6574\u6027\u3002</li> </ul> <p></p>"},{"location":"3_genus_synthesis_workflow/#register-file-compiler","title":"Register File Compiler","text":"<p>\u4e0e<code>SRAM Compiler</code>\u6d41\u7a0b\u7c7b\u4f3c\u3002 </p>"},{"location":"3_genus_synthesis_workflow/#rtl","title":"RTL\u6570\u5b57\u7efc\u5408","text":""},{"location":"3_genus_synthesis_workflow/#_1","title":"\u4fee\u6539\u5de5\u827a\u8def\u5f84","text":"<ul> <li><code>./scripts/design_input_macro.tcl</code> \u4e2d\u4fee\u6539PDK\u548c\u6807\u51c6\u5e93\u7684\u8def\u5f84\u3002\u5728\u4e4b\u540e\u7684\u7efc\u5408/\u540e\u7aef\u6d41\u7a0b\u4e2d\u4e5f\u4f1a\u6d89\u53ca\u5230\u4f7f\u7528\u7684\u5de5\u827a\u5e93\uff0c\u9700\u8981\u6839\u636e\u60c5\u51b5\u8fdb\u884c\u8c03\u6574\u3002</li> </ul> <pre><code>set std_lib MY_STD_LIB\n</code></pre> <ul> <li><code>std_lib</code>\u53ef\u9009\uff1a<ul> <li><code>tcbn22ullbwp30p140lvt</code></li> <li><code>tcbn22ullbwp30p140hvt</code></li> <li><code>tcbn22ullbwp7t30p140lvt</code></li> <li><code>tcbn22ullbwp7t30p140hvt</code></li> <li><code>tcbn22ullbwp7t40p140ehvt</code></li> <li><code>tcbn22ullbwp7t40p140hvt</code></li> </ul> </li> </ul>"},{"location":"3_genus_synthesis_workflow/#rtl_1","title":"\u6dfb\u52a0RTL","text":"<ul> <li>\u6dfb\u52a0RTL\u4ee3\u7801\u81f3<code>./rtl/</code></li> <li>\u5728<code>./rtl/srcs.tcl</code>\u4e2d\u6dfb\u52a0\u6587\u4ef6\u540d</li> </ul> <pre><code>read_hdl ../rtl/MY_MODULE_1.v\nread_hdl ../rtl/MY_MODULE_2.v\n</code></pre>"},{"location":"3_genus_synthesis_workflow/#_2","title":"\u5b9a\u4e49\u9876\u5c42\u6a21\u5757","text":"<ul> <li>\u5728<code>./scripts/core_config.tcl</code>\u4e2d\u5b9a\u4e49\u9700\u8981\u7efc\u5408\u7684\u9876\u5c42\u6a21\u5757\u540d\u79f0</li> </ul> <pre><code>set rm_core_top MY_TOP_MODULE\n</code></pre>"},{"location":"3_genus_synthesis_workflow/#_3","title":"\u5b9a\u4e49\u65f6\u949f\u5468\u671f","text":"<ul> <li>\u5728<code>./scripts/design_input_macro.tcl</code>\u4e2d</li> </ul> <pre><code>set rm_clock_period MY_CLOCK_PERIOD\n</code></pre> <ul> <li>\u5355\u4f4d\u4e3ans</li> </ul>"},{"location":"3_genus_synthesis_workflow/#sramregister-file_1","title":"\u6dfb\u52a0SRAM/Register File\u6240\u9700\u7684\u6587\u4ef6","text":"<ul> <li>\u5c06\u6240\u9700\u8981\u7684SRAM LIB\u6587\u4ef6\u751f\u6210\u5e76\u653e\u7f6e\u4e8e<code>./sram/my_sram_lib_files/</code>\u6587\u4ef6\u5939\u4e2d\uff0c</li> <li>\u5728<code>./scripts/design_input_macro.tcl</code>\u4e2d\u6dfb\u52a0\u7efc\u5408\u6240\u9700\u8981\u7684SRAM</li> </ul> <pre><code>set sram_insts [concat $MACROname_rams \\\n    \"my_sram_lib_files\" \\\n]\n</code></pre>"},{"location":"3_genus_synthesis_workflow/#macrocim","title":"\u6dfb\u52a0\u989d\u5916\u7684Macro\uff08\u4f8b\u5982CIM\uff0c\u5b50\u6a21\u5757\uff09\u6240\u9700\u7684\u6587\u4ef6","text":"<ul> <li>\u6dfb\u52a0<code>LIB</code>\u6587\u4ef6\u3002<ul> <li><code>LIB</code>\u6587\u4ef6\u5305\u62ec\u5404\u4e2a\u6a21\u5757\u7684\u65f6\u5e8f\u4fe1\u606f\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2aCorner\u90fd\u4f1a\u751f\u6210\u76f8\u5e94\u7684<code>LIB</code>\u6587\u4ef6\u3002 </li> <li>\u5bf9\u4e8eGenus Synthesis\uff0c<code>LIB</code>\u6587\u4ef6\u662f\u5fc5\u987b\u7684\u3002</li> </ul> </li> </ul> <pre><code>set ff_0p88v_m40c_libs [list ${base_lib_dir}/${base_ff_0p88v_m40c_lib}.lib ${io_lib}ffg08ppv2p75vm40c.lib \\\n    /path/to/foundry/lib/files \\\n    /work/home/my_project/tapeout/lib_files/CIM_ff_0p88v_m40c.lib \\\n]\n</code></pre> <ul> <li>\u6dfb\u52a0<code>LEF</code>\u6587\u4ef6\u3002<ul> <li><code>LEF</code>\u6574\u4f53\u6a21\u5757\u5404\u5c42\u91d1\u5c5e\u7684\u5c3a\u5bf8\uff0c\u4ee5\u53ca\u5404\u4e2a\u7ba1\u811a\u7684\u5927\u5c0f\u548c\u4f4d\u7f6e\u3002</li> <li>\u5bf9\u4e8e\u540e\u7eedInnovus Implementation\uff0c\u9700\u8981\u5728<code>./scripts/design_inputs_macro.tcl</code>\u6dfb\u52a0<code>LEF</code>\u6587\u4ef6\u3002</li> <li>\u5bf9\u4e8eGenus Synthesis\uff0c\u53ef\u4ee5\u6682\u65f6\u4e0d\u6dfb\u52a0<code>LEF</code>\u6587\u4ef6\uff0c\u4f46\u662f\u8fd9\u6837\u7684\u8bddGenus\u7efc\u5408\u62a5\u544a\u4e2d\u4e0d\u4f1a\u62a5\u8be5Macro\u7684\u9762\u79ef\u3002\u4e3a\u4e86\u80fd\u591f\u5728\u540e\u7aef\u4e4b\u524d\u5927\u6982\u4f30\u8ba1\u8bbe\u8ba1\u7684\u9762\u79ef\uff0c\u5efa\u8bae\u5728\u7efc\u5408\u524d\u6dfb\u52a0<code>LEF</code>\u3002</li> </ul> </li> </ul> <pre><code>set rm_lef_reflib [concat ${rm_lef_tech_file} ${rm_foundry_liv_dirs}/Back_End/lef/${std_lib}_110a/lef/${std_lib}.lef \\\n    /path/to/foundry/lef/files \\\n    /work/home/my_project/tapeout/lef_files/CIM.lef \\\n]\n</code></pre>"},{"location":"3_genus_synthesis_workflow/#_4","title":"\u542f\u52a8\u7efc\u5408","text":"<ul> <li><code>b make genus_syn</code></li> </ul>"},{"location":"3_genus_synthesis_workflow/#_5","title":"\u68c0\u67e5\u751f\u6210\u6587\u4ef6","text":"<ul> <li><code>./data/MY_TOP_MODULE-genus.v</code>\uff1a\u751f\u6210\u7684gate level netlist</li> <li><code>./data/func-genus.sdc</code>\uff1a\u751f\u6210\u7684SDC</li> <li><code>./logs/genus_synthesis.log</code>\uff1a\u7efc\u5408\u8fc7\u7a0b\u4e2d\u7684log\u6587\u4ef6\uff0c\u53ef\u4ee5\u67e5\u627e<code>Error</code>, <code>Warning</code>\u7b49\u5173\u952e\u8bcd\u68c0\u67e5\u6d41\u7a0b\u662f\u5426\u6709\u8bef\u3002</li> <li><code>./reports/genus/func_tt_0p90v_025c_timing.rpt</code>\uff1att corner\u7684timing report\uff0c\u53ef\u4ee5\u67e5\u627e<code>VIOLATED</code>\u5173\u952e\u8bcd\u68c0\u67e5\u65f6\u5e8f\u662f\u5426\u6ee1\u8db3\u3002\u7c7b\u4f3c\u5730\uff0c\u53ef\u4ee5\u67e5\u770bss corner\u7684timing report\u3002</li> <li><code>./reports/genus/area.rpt</code>\uff1a\u751f\u6210\u7684\u9762\u79ef\u62a5\u544a</li> </ul>"},{"location":"3_genus_synthesis_workflow/#gate-level","title":"Gate-level\u7684\u6570\u5b57\u4eff\u771f","text":"<p>\u5728\u6570\u5b57\u7efc\u5408\u4e4b\u540e\uff0c\u5bf9\u751f\u6210\u7684Gate level netlist\u8fdb\u884c\u5e26\u6709SDF\u7684\u4eff\u771f\u662f\u975e\u5e38\u6709\u5fc5\u8981\u7684\uff0c\u53ef\u4ee5\u786e\u8ba4\u751f\u6210\u7684Gate level netlist\u903b\u8f91\u6b63\u786e\u3002</p> <p>\u8fdb\u5165<code>./tb/</code>\u6587\u4ef6\u5939</p> <p>\u51c6\u5907Testbench\uff0c\u4e00\u4e2a\u793a\u4f8b\u5927\u81f4\u5982\u4e0b\uff1a</p> <pre><code>parameter CLOCK_PERIOD = 5.0;\nmodule tb_top();\nreg clock;\nreg reset;\ninitial begin\n    $sdf_annotate(\"../data/TOP_MODULE_func_tt_0p80v_25c.sdf\", dut, ,, \"MAXIMUM\", \"1.6:1.4:1.2\", \"FROM_MTM\");\n    $fsdbDumpfile(\"waveform\");\n    $fsdbDumpvars(\"+all\");\nend\n\ninitial begin\n    clock = 1'b1;\n    reset = 1'b1;\n    #(CLOCK_PERIOD * 10) reset = 1'b0;\n    #(CLOCK_PERIOD * 200) $finish;\n\nalways #(CLOCK_PERIOD/2) clock &lt;= ~clock;\n\nTOP_MODULE dut(\n    .clock(clock),\n    .reset(reset)\n);\nendmodule\n</code></pre> <ul> <li>\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c<code>$sdf_annotate</code>\u9009\u9879\u5bfc\u5165\u4e86tt corner\u7684\u65f6\u5e8f\u4fe1\u606f\uff0c\u540c\u6837\u5730\uff0c\u4e5f\u53ef\u4ee5\u5bfc\u5165ss corner\u6216ff corner\u7684SDF\u6587\u4ef6\u3002</li> <li><code>$fsdbDumpfile(waveform)</code>\u9009\u9879\u4f1a\u751f\u6210\u540d\u4e3a<code>waveform</code>\u7684\u6ce2\u5f62\u6587\u4ef6\uff0c\u53ef\u4ee5\u540e\u7eed\u4f7f\u7528Verdi\u67e5\u770b\u6ce2\u5f62\u3002</li> <li><code>$fsdbDumpvars(\"+all\")</code>\u9009\u9879\u4f1a\u751f\u6210\u6240\u6709\u53d8\u91cf\u7684\u6ce2\u5f62\u3002</li> <li>\u8fd9\u4e2a\u793a\u4f8b\u4ec5\u4ec5\u7ed9\u9876\u5c42\u6a21\u5757\u65f6\u949f\u4fe1\u53f7\u4e0e\u590d\u4f4d\u4fe1\u53f7\uff0c\u5982\u679c\u60f3\u8981\u9a8c\u8bc1\u903b\u8f91\u6b63\u786e\uff0c\u8fd8\u9700\u8981\u5176\u4f59\u66f4\u4e3a\u590d\u6742\u7684\u6fc0\u52b1\u3002</li> </ul> <p>\u4fee\u6539<code>Makefile</code>\uff0c\u66ff\u6362RTL\u8def\u5f84\u4ee5\u53caTestbench\u6587\u4ef6\u3002\u5982\u679c\u6a21\u5757\u8c03\u7528\u4e86SRAM Compiler\u751f\u6210\u7684Memory\u6216\u8005\u6709\u5176\u4f59\u7684\u5b50\u6a21\u5757\uff0c\u4e5f\u9700\u8981\u5c06RTL\u6587\u4ef6\u6dfb\u52a0\u5230<code>GATE</code>\u53d8\u91cf\u4e2d\u3002</p> <pre><code>GATE = ../data/TOP-MODULE-genus.v \n\ncompile_gate:\n    ${LOAD_VCS}; vcs $(VCS_OPTIONS) testbench.v $(GATE) $(LIB) -R -fsdb\n</code></pre> <p>\u8fd0\u884c<code>b make compile_gate</code>\u8fdb\u884cVCS\u4eff\u771f\u3002 \u8fd0\u884c<code>b make verdi</code> \u6253\u5f00\u6ce2\u5f62\u56fe\u3002\u8be5\u547d\u4ee4\u8c03\u7528<code>Makefile</code>\u4e2d\u7684\u5982\u4e0b\u6307\u4ee4\uff0c\u786e\u4fdd\u6ce2\u5f62\u6587\u4ef6\u540d\u79f0\u4e0eTestbench\u4e2d\u4fdd\u6301\u4e00\u81f4\u3002</p> <pre><code>verdi:\n    ${LOAD_VERDI}; verdi -ssf waveform.fsdb\n</code></pre>"},{"location":"4_innovus_backend_workflow/","title":"Innovus learning notes","text":"<ul> <li>\u6b64\u5904\u5927\u81f4\u4ecb\u7ecd\u4e86Innovus\u540e\u7aef\u6d41\u7a0b\uff0c\u4e3a\u5e26\u6709SRAM/Register File\u7684\u540e\u7aef\u6d41\u7a0b\u3002</li> <li>\u8fd0\u884cInnovus\u540e\u7aef\u9700\u8981\u5728Genus synthesis\u5b8c\u6210\u7684\u57fa\u7840\u4e0a\u8fdb\u884c\u3002</li> <li>\u811a\u672c\u4e2d\u8bb8\u591a\u7684\u53c2\u6570\u8bbe\u7f6e\uff0c\u4f8b\u5982width, spacing\uff0c\u4ee5\u53caMACRO\u7684\u4f4d\u7f6e\u6446\u653e\u9700\u8981\u6839\u636e\u7248\u56fe\u5927\u5c0f\u4ee5\u53ca\u5e03\u7ebf\u60c5\u51b5\u6765\u8bbe\u5b9a\uff0c\u9700\u591a\u6b21\u8fed\u4ee3\u4f18\u5316\u3002</li> </ul>"},{"location":"4_innovus_backend_workflow/#_1","title":"\u90e8\u5206\u547d\u4ee4\u8bf4\u660e","text":"<ul> <li>\u5728\u8bb2\u8ff0\u5177\u4f53\u7684\u540e\u7aef\u6d41\u7a0b\u4e4b\u524d\uff0c\u6709\u5fc5\u8981\u5bf9\u4e00\u4e9b\u547d\u4ee4\u8fdb\u884c\u8bf4\u660e\uff0c\u6216\u8bb8\u4f1a\u5bf9\u540e\u7aef\u6d41\u7a0bdebugging\u6709\u4e00\u5b9a\u5e2e\u52a9</li> <li>\u5728\u8fd0\u884c\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u78b0\u5230\u62a5\u9519\uff0c\u6216\u8005\u5bf9\u4e8e\u67d0\u4e9b\u547d\u4ee4\u53c2\u6570\u9009\u9879\u4e0d\u786e\u5b9a\uff0c\u53ef\u4ee5\u5728Innovus\u547d\u4ee4\u884c\u4e2d\u8f93\u5165<code>man &lt;CMD_Name&gt;</code>\u6765\u67e5\u770b\u5b98\u65b9Manual\u4ee5\u83b7\u5f97\u76f8\u5e94\u4fe1\u606f\u3002</li> <li>\u4e2a\u4eba\u611f\u89c9\uff0cManual\u5bf9\u4e8e\u547d\u4ee4\u7684\u8bf4\u660e\u8f83\u4e3a\u6e05\u6670\uff0c\u914d\u5408ChatGPT\u53ef\u4ee5\u83b7\u5f97\u8f83\u597d\u7684\u6548\u679c\uff0c\u800c\u5bf9\u4e8e\u62a5\u9519\u4fe1\u606f\uff0c\u5b98\u65b9\u624b\u518c\u4ee5\u53ca\u7f51\u7edc\u4fe1\u606f\u90fd\u6bd4\u8f83\u6b20\u7f3a\uff0c\u9700\u66f4\u6709\u9488\u5bf9\u6027\u8fdb\u884c\u67e5\u627e\u3002</li> </ul>"},{"location":"4_innovus_backend_workflow/#setmulticpuusage","title":"\u5173\u4e8e<code>setMultiCpuUsage</code>\u547d\u4ee4","text":"<ul> <li>\u82e5\u4f7f\u7528<code>setMultiCpuUsage -localCpu max -cpuAutoAdjust true -verbose</code>\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4Innovus\u95ea\u9000\u3002\u5927\u81f4\u539f\u56e0\u662fCPU\u6838\u6570\u8fc7\u591a\uff0c\u5bfc\u81f4\u670d\u52a1\u5668\u7ec8\u6b62\u8fdb\u7a0b\u3002</li> <li>\u5efa\u8bae\u4f7f\u7528<code>setMultiCpuUsage -localCpu 32</code>\uff0c\u53ef\u4ee5\u4fdd\u8bc1Innovus\u7a33\u5b9a\u8fd0\u884c\u3002</li> </ul>"},{"location":"4_innovus_backend_workflow/#createrouteblk","title":"\u5173\u4e8e<code>createRouteBlk</code>\u547d\u4ee4","text":"<ul> <li>Description: creates a routing blockage object. The object area prevents routing of specified metal layers, signal routes and hierarchical instances in this area.</li> <li>\u5bf9\u4e8e\u9876\u5c42\u6a21\u5757\u96c6\u6210\u7684\u540e\u7aef\u6d41\u7a0b\uff0c\u9700\u8981\u8003\u8651\u4f7f\u7528\u8be5\u547d\u4ee4</li> <li>SRAM/Register File\u7684LEF\u6587\u4ef6\u4e2d\u5b9a\u4e49\u4e86\u54ea\u4e9bLayer\u88ab\u5360\u7528\uff0c\u65e0\u9700\u53e6\u5916\u4f7f\u7528<code>createRouteBlk</code>\u5728SRAM/Register File\u5468\u56f4\u8bbe\u7f6eRouting Blockage</li> <li>\u9876\u5c42\u6a21\u5757\u96c6\u6210\u65f6\uff0c\u53ef\u4ee5\u8003\u8651\u51cf\u5c0fRouting Blockage\u7684<code>-spacing</code>\u9009\u9879\uff0c\u4f9b<code>ecoRoute</code>\u6709\u66f4\u591a\u7a7a\u95f4\u5e03\u7ebf\u4ee5\u4fee\u590dDRC</li> <li><code>-pgnetonly</code><ul> <li>Specifies that the routing blockage is to be applied only on power or ground net special routes and not on signal nets.</li> <li>This option affects only commands that create special routes, such as <code>addRing</code>, <code>addStripe</code>, or <code>sroute</code>, when they are used for PG nets.</li> <li><code>NanoRoute</code>, which is used to connect tie-high or tie-low connections or to connect to secondary standard-cell power-pin connections, is also not affected by this option.</li> </ul> </li> <li>Use this option during power planning to prevent power routes from getting too close to block edges and, as a result, blocking signal pin access or causing congestion in narrow channels.</li> <li><code>-exceptpgnet</code><ul> <li>Specifies that the routing blockage is to be applied on a signal net routing and not on power or ground net routing.</li> <li>Use this option to block signal routing above or around a sensitive block to avoid noise from nearby signal nets but still allow power connections to go through the blockage.</li> <li>Blocking the signal net routing helps in avoiding cross talk or coupling caused by signal routes.</li> </ul> </li> </ul>"},{"location":"4_innovus_backend_workflow/#editpin","title":"\u5173\u4e8e<code>editPin</code>\u547d\u4ee4","text":"<ul> <li>\u5bf9\u4e8e\u5927\u90e8\u5206\u7684\u6570\u5b57\u6a21\u5757\uff0c\u7ba1\u811a\u6570\u91cf\u662f\u6210\u767e\u4e0a\u5343\u7684\uff0c\u65e0\u6cd5\u624b\u52a8\u5199\u547d\u4ee4\u8bbe\u7f6e\u6bcf\u4e00\u4e2a\u7ba1\u811a\u3002</li> <li>\u5728Innovus GUI\u754c\u9762\u4e2d\u4e0a\u65b9\u5de5\u5177\u680f\u9009\u62e9<code>Edit -&gt; Pin Editor</code>\u6839\u636e\u9700\u6c42\u6dfb\u52a0\u7ba1\u811a\u3002</li> <li>\u5728<code>innovus.cmd</code>\u6587\u4ef6\u4e2d\u53ef\u4ee5\u770b\u5230\u6bcf\u4e00\u6b65\u64cd\u4f5c\u5bf9\u5e94\u7684\u547d\u4ee4\uff0c\u5176\u4e2d\u5c31\u6709\u6211\u4eec\u6240\u9700\u8981\u7684<code>editPin</code>\u547d\u4ee4\u3002</li> <li>\u7531\u4e8e\u5947\u6570\u5c42\u4e3a\u6a2a\u5411\u91d1\u5c5e\uff0c\u5076\u6570\u5c42\u4e3a\u7eb5\u5411\u91d1\u5c5e\uff0c\u56e0\u6b64\u5bf9\u4e8eTop/Bottom\u53ef\u4ee5\u9009\u62e9M4/M6\u7b49\u91d1\u5c5e\uff0cLeft/Right\u53ef\u4ee5\u9009\u62e9M3/M5\u7b49\u91d1\u5c5e\u3002</li> <li>\u6ce8\u610f\uff1a<ul> <li>\u6a21\u5757\u7684P/G\u4e0d\u9700\u8981\u5728\u8fd9\u4e00\u6b65\u8bbe\u7f6e\u7ba1\u811a\u3002\u5728\u5e03\u5c40\u5e03\u7ebf\u5b8c\u6210\u4e4b\u540e\uff0c\u5c06\u4f1a\u4f7f\u7528<code>createPGPin</code>\u751f\u6210\u4e13\u95e8\u7684P/G\u7ba1\u811a\u3002</li> <li>\u67e5\u770b\u547d\u4ee4\u662f\u5426\u6709\u591a\u4f59\u7684\u9009\u9879\uff0c\u4f8b\u5982<code>-USE GROUND</code>\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u540e\u7eed\u6b65\u9aa4\uff08\u4f8b\u5982CTS\uff09\u65e0\u6cd5\u8fdb\u884c</li> </ul> </li> </ul>"},{"location":"4_innovus_backend_workflow/#addendcap","title":"\u5173\u4e8e<code>addEndCap</code>\u547d\u4ee4","text":"<ul> <li>In digital IC design, especially with automated P&amp;R tools, the standard cells are organized in rows throughout the silicon area.</li> <li>These standard cells are the building blocks of the design, containing logic gates, flip-flops, and other digital circutry.</li> <li>Endcap cells are used to fill the remaining space at the ends of standard cell rows when the last standard cell doesn't perfectly fit in the row's length.</li> <li>They provide electrical and physical isolation between the active area of the silicon and the surrounding structures, suc has the scribe line or the edge of the die.</li> </ul>"},{"location":"4_innovus_backend_workflow/#addwelltap","title":"\u5173\u4e8e<code>addWellTap</code>\u547d\u4ee4","text":"<ul> <li>Welltap cells ensure proper electrical connection and prevent latch-up in CMOS processes.</li> <li>Welltap cells help prevent latch-up by providing a low-resistance path to ground or VDD for the substrate or well in which transistors are fabricated.</li> <li>Welltaps are strategically placed throughout the IC layout, especially near power and ground connections. </li> <li>Their placement is often governed by design rules specified by the foundry.</li> </ul>"},{"location":"4_innovus_backend_workflow/#addring","title":"\u5173\u4e8e<code>addRing</code>\u547d\u4ee4","text":"<p>\u7b80\u5355\u6765\u8bf4\uff0c\u5728\u6a21\u5757\u7684\u56db\u5468\uff0c\u4ee5\u53ca\u5185\u90e8MACRO\uff08\u4f8b\u5982SRAM/Register File\uff09\u7684\u56db\u5468\u9700\u6dfb\u52a0Power ring\uff0c\u7528\u4e8e\u7ed9\u65c1\u8fb9\u7684\u529f\u80fd\u5355\u5143\u4f9b\u7535\u3002</p> <ul> <li>A power ring provides a continuous path for power and ground connections around the periphery of the core area of the entire chip.</li> <li>This ring is essential for distributing power and ground connections uniformly across the chip to ensure that all parts of the IC receive a stable power supply and maintain a solid ground reference.</li> <li>Purpose and functionality: stable power supply, noise reduction, thermal management</li> </ul>"},{"location":"4_innovus_backend_workflow/#addstripe","title":"\u5173\u4e8e<code>addStripe</code>\u547d\u4ee4","text":"<ul> <li>A power stripe is a layout technique used to provide stable power (VDD) and ground (GND) connections to the various logic units and circuit blocks on the chip.</li> <li>Power stripes are implemented by introducing wide metal lines (stripes) into the chip layout that connect to the power and ground supply, ensuring that power distribution across the chip is uniform and grounding is effective.</li> <li>Benefits<ul> <li>Reducing Voltage Drop (IR Drop)</li> <li>Reducing Electromagnetic Interference (EMI)</li> <li>Improving Efficiency of Power Distribution</li> <li>Power Management</li> </ul> </li> <li>\u7b80\u5355\u6765\u8bf4\uff0c\u9700\u8981\u5728\u7248\u56fe\u7684\u5168\u90e8\u533a\u57df\u6dfb\u52a0Power stripe</li> <li>\u5076\u6570\u5c42\u8bbe\u7f6e<code>-direction vertical</code>\uff0c\u5947\u6570\u5c42\u8bbe\u7f6e<code>-direction horizontal</code>\uff0c\u7531\u6b64\u6784\u6210Power mesh\uff08\u4f9b\u7535\u7f51\u683c\uff09</li> <li>\u4e3a\u4e86\u907f\u514d\u5e95\u5c42\u91d1\u5c5e\u5e03\u7ebf\u8fc7\u4e8e\u5bc6\u96c6\uff0c\u53ef\u4ee5\u8003\u8651\u5728\u8f83\u4f4e\u5c42\u91d1\u5c5e\uff08\u4f8b\u5982M6\uff09\u8bbe\u7f6e\u8f83\u4e3a\u7a00\u758f\u7684Power stripe\uff0c\u5728\u8f83\u9ad8\u5c42\u91d1\u5c5e\uff08\u4f8b\u5982M8\uff09\u8bbe\u7f6e\u8f83\u4e3a\u5bc6\u96c6</li> <li>\u540e\u7eed\u4f7f\u7528<code>sroute</code>\u547d\u4ee4\u5c06Power stripe\u8fde\u63a5\u8d77\u6765\uff0c\u53ea\u9700\u8fde\u63a5\u5230\u6700\u4f4e\u5c42\u7684Power stripe\u5373\u53ef\u3002</li> </ul>"},{"location":"4_innovus_backend_workflow/#createpgpin","title":"\u5173\u4e8e<code>createPGPin</code>\u547d\u4ee4","text":"<ul> <li>\u5c06\u6700\u9876\u5c42\u7684\u91d1\u5c5e\u8d70\u7ebf\u4f5c\u4e3aP/G Pin\uff0c\u56e0\u6b64\u6b64\u5904\u751f\u6210\u7684P/G Pin\u9700\u8981\u548c\u6b64\u524d\u4f7f\u7528<code>addStripe</code>\u751f\u6210\u7684P/G\u91d1\u5c5e\u6761\u4fdd\u6301\u91cd\u5408\u3002</li> <li>\u56e0\u4e3a\u9700\u8981\u4fdd\u6301\u4e00\u5b9a\u95f4\u9694\u8fde\u7eed\u751f\u6210\u8bb8\u591a\u6761P/G Pin\uff0c\u53ef\u4ee5\u7528\u4e00\u5c42For\u5faa\u73af\u6765\u51cf\u5c11\u5de5\u4f5c\u91cf\u3002</li> </ul>"},{"location":"4_innovus_backend_workflow/#sramregister-file","title":"\u5e26\u6709SRAM/Register File\u8bbe\u8ba1\u7684\u540e\u7aef\u6d41\u7a0b","text":""},{"location":"4_innovus_backend_workflow/#_2","title":"\u811a\u672c\u8c03\u6574","text":"<ul> <li>\u5728<code>./scripts/design_input_macro.tcl</code>\u4e2d\u6dfb\u52a0SRAM/Register File\u7684<code>LEF</code></li> <li>\u5728<code>./scripts/tech.tcl</code>\u4e2d\u6dfb\u52a0SRAM/Register File\u7684<code>LIB</code></li> <li>\u5bf9\u4e8e\u9876\u5c42\u6a21\u5757\u7684\u96c6\u6210\uff0c\u5982\u679c\u6709\u4e00\u4e9b\u5b50\u6a21\u5757\u5df2\u7ecf\u5b8c\u6210\u540e\u7aef\uff0c\u4e5f\u9700\u8981\u5728\u8fd9\u4e24\u4e2a\u4f4d\u7f6e\u5206\u522b\u52a0\u5165<code>LIB</code>\u548c<code>LEF</code>\u6587\u4ef6\u3002\u5b9e\u9645\u4e0a<code>LIB</code>\u6587\u4ef6\u5e94\u8be5\u5728Genus\u7efc\u5408\u524d\u5c31\u6dfb\u52a0\uff0c\u5426\u5219\u7efc\u5408\u65f6\u65e0\u6cd5\u8bfb\u53d6\u5176\u6240\u9700\u7684\u65f6\u5e8f\u4fe1\u606f\u3002</li> <li>\u8fde\u63a5Power<ul> <li>\u5728<code>./scripts/init_invs.tcl</code>\u4e2d\u4fee\u6539\u6a21\u5757\u7684P/G Connection\u3002</li> <li>\u5982\u679c\u9700\u8981\u533a\u5206\u7535\u6e90\u57df\uff0c\u4f8b\u5982SRAM\u9700\u8981\u5355\u72ec\u4f9b\u7535\uff0c\u5219\u9700\u8981\u5728\u6b64\u5b9a\u4e49<code>VDD</code>, <code>VDD_SRAM</code>\u4e24\u4e2aPower Net</li> </ul> </li> </ul> <pre><code>set init_pwr_net {VDD VDD_SRAM}\n</code></pre>"},{"location":"4_innovus_backend_workflow/#_3","title":"\u6d41\u7a0b\u8bf4\u660e","text":"<p>\u6b64\u5904\u4ee5<code>Jan15_HuanCun</code>\u6a21\u5757\u7684\u540e\u7aef\u6d41\u7a0b\u4e3a\u4f8b</p> <ul> <li>Start Innovus</li> </ul> <pre><code>cd /work/home/ztzhu/my_projects/xiangshan/Jan15/backend_huancun/\ngvim huancun_innovus_script.tcl &amp; cd work\nb innovus\n</code></pre> <ul> <li>Load design     \u5728Innovus\u7684\u547d\u4ee4\u884c\u4e2d\u8f93\u5165\u5982\u4e0b\u547d\u4ee4\uff0c\u4e0b\u540c</li> </ul> <pre><code>date\nsetMultiCpuUsage -localCpu 32\nset start_time [clock seconds]\nsource -verbose ../scripts/core_config.tcl\nsource -verbose ../scripts/tech.tcl\nsource -verbose ../scripts/init_invs.tcl\nsource -verbose ../scripts/invs_settings.tcl\n</code></pre> <ul> <li>Set FloorPlan<ul> <li>\u6839\u636eGenus\u7efc\u5408\u7684\u9762\u79ef\u62a5\u544a\u4ee5\u53ca\u6574\u4f53\u7248\u56fe\u89c4\u5212\u9009\u62e9\u7248\u56fe\u7684\u957f\u548c\u5bbd</li> <li>Innovus\u53f3\u4e0a\u89d2\u7684Floorplan View\u53ef\u4ee5\u770b\u5230SRAM/Register File\u7b49MACRO\u7684\u5927\u5c0f </li> </ul> </li> </ul> <pre><code>set cell_height 0.7\nset macro_halo_spc [expr 1 * $cell_height]\nset macro_halo_spc_4 [expr 4 * $cell_height]\nset macro_halo_spc_2 [expr 2 * $cell_height]\n# set macro_halo_spc [expr 4 * $cell_height]\nset die_sizex 900\nset die_sizey 850\nfloorPlan -d $die_sizex $die_sizey 3.5 3.5 3.5 3.5\nuiSetTool select\ngetIoFlowFlag\n</code></pre> <ul> <li>Place SRAM and other macros<ul> <li>\u89c1place_macro.tcl</li> </ul> </li> </ul> <pre><code>source ../scripts/place_macro.tcl\n</code></pre> <ul> <li>Add halos and routing blockage around macros<ul> <li>\u53ef\u4ee5\u901a\u8fc7\u6dfb\u52a0<code>RO R90 R180 MX MX90 MY MY90</code>\u7b49\u51b3\u5b9aSRAM\u7684\u6446\u653e\u65b9\u5411</li> <li>\u4f8b\u5982\uff1a<code>placeInstance $sram_macro 21.0 21.0 R180</code></li> <li>\u9700\u8981\u6ce8\u610f\uff0c22nm\u5de5\u827a\u4e0d\u652f\u630190\u5ea6\u65cb\u8f6c</li> </ul> </li> </ul> <pre><code># add Halos around MACROS\nsetInstancePlacementStatus -allHardMacros -status fixed\naddHaloToBlock [list $macro_halo_spc_4 $macro_halo_spc_4 $macro_halo_spc_4 $macro_halo_spc_4] -allMacro\n\n# add Routing Blockage if necessary\nfor {set i 0 } {$i &lt;= 7 } {incr $i} {\n    set macroName \"sram_$i\"\n    createRouteBlk -cover -inst [set $macroName] -layer {M1 M2 M3 M4 M5 M6 M7} -spacing $macro_halo_spc\n}\nfor {set i 0 } {$i &lt;= 6 } {incr $i} {\n    set macroName \"rf_$i\"\n    createRouteBlk -cover -inst [set $macroName] -layer {M1 M2 M3 M4 M5 M6 M7} -spacing $macro_halo_spc\n}\n</code></pre> <ul> <li>Define P/G Connections<ul> <li>\u89c1pg_pin.tcl</li> </ul> </li> </ul> <pre><code>source ../scripts/power_pins.tcl\n</code></pre> <ul> <li>Add Pins<ul> <li>\u4f7f\u7528<code>editPin</code>\u547d\u4ee4\uff0c\u89c1add_pin.tcl</li> </ul> </li> </ul> <pre><code>source ../scripts/add_pin.tcl\n</code></pre> <ul> <li>Add EndCaps, WellTaps</li> </ul> <pre><code>set itx $rm_tap_cell_distance\nset tap_rule [expr $itx/4]\n\nsetPlaceMode -place_detail_legalization_inst_gap 2\nsetPlaceMode -place_detail_use_no_diffusion_one_site_filler false\n\nsetEndCapMode -reset\nsetEndCapMode -rightEdge $endcap_left -leftEdge $endcap_right\naddEndCap\n\naddWellTap -cell ${rm_tap_cell} -cellInterval $rm_tap_cell_distance -checkerboard\nallWellTap -prefix DECAP -cellInterval $rm_tap_cell_distance -cell ${dcap_cell} -skipRow 1\n</code></pre> <ul> <li>Add Power Rings, Power Stripes<ul> <li>\u89c1power_ring.tcl</li> <li>\u5e94\u5f53\u53ef\u4ee5\u770b\u5230\u8d70\u5728SRAM/Register File MACRO\u4e0a\u7684Power\u3002\u4ee5\u4e0b\u56fe\u4e3a\u4f8b\uff0c\u53ef\u4ee5\u770b\u5230M6\u5c42\u7684Power Stripe\u5230M4\u5c42SRAM VDD\u7684VIA\uff0c\u8bf4\u660e\u7ed9\u8be5MACRO\u63d0\u4f9b\u4e86\u4f9b\u7535\u3002</li> </ul> </li> </ul> <pre><code>source ../scripts/power_ring.tcl\n\n# add power stripes at four sides of SRAM\n# M6 (Vertical)\naddStripe -start_offset 0.7 -direction vertical -block_ring_top_layer_limit M6 -padcore_ring_bottom_layer M1 -set_to_set_distance 30 -stacked_via_top_layer M6 -padcore_ring_top_layer_limit M6 -spacing 15 -layer M6 -block_ring_bottom_layer_limit M1 -width 2 -nets {VSS, VDD_SRAM} -stacked_via_bottom_layar M1\n\n# M7 (Horizontal)\naddStripe -start_offset 0.7 -direction horizontal -block_ring_top_layer_limit M7 -padcore_ring_bottom_layer M6 -set_to_set_distance 20 -stacked_via_top_layer M7 -padcore_ring_top_layer_limit M7 -spacing 10 -layer M7 -block_ring_bottom_layer_limit M6 -width 2 -nets {VSS, VDD_SRAM} -stacked_via_bottom_layar M6\n\n# M8 (Vertical)\naddStripe -start_offset 10 -direction vertical -block_ring_top_layer_limit M8 -padcore_ring_bottom_layer M6 -set_to_set_distance 20 -stacked_via_top_layer M8 -padcore_ring_top_layer_limit M8 -spacing 10 -layer M8 -block_ring_bottom_layer_limit M6 -width 2 -nets {VSS, VDD_SRAM} -stacked_via_bottom_layar M6\n\nsroute -connect { corePin } -layerChangeRange { M1 M6 } -blockPinTarget { nearestRingStripe nearestTarget } -padPinPortConnect { allPort oneGeom } -checkAlignedSecondaryPin 1 -blockPin useLef  -allowJogging 0 -crossoverViaBottomLayer M1 -allowLayerChange 1 -targetViaTopLayer M6 -crossoverViaTopLayer M6 -targetViaBottomLayer M1 -nets {VDD VSS VDD_SRAM}\n\neditPowerVia -skip_via_on_pin Standardcell -bottom_layer M1 -add_vias 1 -top_layer M6\n</code></pre> <ul> <li>Placement<ul> <li><code>-routeTopRoutingLayer 7</code>\u8bf4\u660e\u5141\u8bb8\u4fe1\u53f7\u7ebf\u6700\u9ad8\u4f7f\u7528M7\u5c42\u7684\u91d1\u5c5e\u3002\u6839\u636e\u6574\u4f53\u7248\u56fe\u60c5\u51b5\uff0c\u53ef\u4ee5\u9009\u62e9M5-M7\u5c42\u4f5c\u4e3a\u5e03\u4fe1\u53f7\u7ebf\u6240\u5141\u8bb8\u7684\u6700\u9ad8\u5c42\u91d1\u5c5e\u3002\u901a\u5e38\u6765\u8bf4\uff0c\u7248\u56fe\u6700\u9ad8\u5c42\u91d1\u5c5e\u53ea\u4f1a\u6709P/G\u7535\u6e90\u7ebf\uff0c\u5728\u6b64\u4f8b\u4e2d\uff0c\u4e3aM8\u5c42\u91d1\u5c5e\u3002</li> <li><code>-routeBottomRoutingLayer 2</code>\u8bf4\u660e\u5141\u8bb8\u4fe1\u53f7\u7ebf\u6700\u4f4e\u4f7f\u7528M2\u5c42\u7684\u91d1\u5c5e\u3002</li> </ul> </li> </ul> <pre><code>setTieHiLoMode  -cell $rm_tie_hi_lo_list \\\n                                -maxFanout 8\ndeleteTieHiLo\n\nsetPlaceMode -reset\nsetPlaceMode -place_detail_legalization_inst_gap 2\nsetPlaceMode -place_detail_use_no_diffusion_one_site_filler false\n\n# to address the issue regarding scan chains\n# setPlaceMode -place_global_ignore_scan false\n\nsetNanoRouteMode -routeTopRoutingLayer 7\nsetNanoRouteMode -routeBottomRoutingLayer 2\nsetPlaceMode -fp false\nsetAnalysisMode -aocv false\n\nplaceDesign\naddTieHiLo\n\nplace_opt_design -incremental  -out_dir ../reports/layout/INNOVUS_RPT -prefix place\ntimeDesign -preCTS -outDir ../reports/layout/INNOVUS_RPT\n\n# preCTS reports\nset myOption \"preCTS\"\nsource ../scripts/intermediate_reporting.tcl\n</code></pre> <ul> <li>Clock Tree Synthesis (CTS)</li> </ul> <pre><code>set_ccopt_property -update_io_latency true\nset_ccopt_property -force_update_io_latency true\nset_ccopt_property -enable_all_views_for_io_latency_update true\nset_ccopt_property -max_fanout ${rm_cts_max_fanout}\nset_ccopt_property -effort high\nset_ccopt_property buffer_cells $rm_clock_buf_cap_cell\nset_ccopt_property inverter_cells $rm_clock_inv_cap_cell\nset_ccopt_property clock_gating_cells $rm_clock_icg_cell\n\nset_ccopt_mode -cts_use_min_max_path_delay false \\\n                                -cts_target_slew $rm_max_clock_transition \\\n                                -cts_target_skew 0.15 \\\n                                -modify_clock_latency false\n\n# set_ccopt_property balance_mode cluster\ncreate_ccopt_clock_tree_spec -file ../data/${rm_core_top}-ccopt_cts.spec\ncreate_ccopt_clock_tree_spec\n\nccopt_design -check_prerequisites\nccopt_design -outDir ../reports/layout/INNOVUS_RPT -prefix ccopt\n\n# Report design after CTS\nset myOption \"clocks\"\nsource ../scripts/intermediate_reporting.tcl\n</code></pre> <ul> <li>Route</li> </ul> <pre><code>setExtractRCMode -engine postRoute -effortLevel medium -tQuantusForPostRoute true\n\nset NanoRouteMode -routeWithTimingDriven true \\\n                                -routeWithSiDriven true \\\n                                -routeWithLithoDriven false \\\n                            -routeDesignRouteClockNetsFirst true \\\n                                -routeReserveSpaceForMultiCut false \\\n                                -drouteUseMultiCutViaEffort low \\\n                            -drouteFixAntenna true\n\nrouteDesign\n</code></pre> <ul> <li>Post-route</li> </ul> <pre><code>setExtractRCMode -engine postRoute -effortLeve medium -tQuantusForPostRoute true\nsetOptMode -verbose true\nsetOptMode -highEffortOptCells $hold_fixing_cells\nsetOptMode -holdFixingCells $hold_fixing_cells\noptDesign -postRoute -drv\noptDesign -postRoute -incr\noptDesign -postRoute -hold\n\ntimeDesign -postRoute -outDir ../reports/layout/INNOVUS_RPT\ntimeDesign -postRoute -hold -outDir ../reports/layout/INNOVUS_RPT\n\n# Report design after routing\nset myOption \"postRoute\"\nsource ../scripts/intermediate_reporting.tcl\n\n# Incrementtal routing to fix shorts\naddTieHiLo\n\nsetNanoRouteMode -routeWithEco true -drouteFixAntenna true -routeInsertAntennaDiode true\nglobalDetailRoute\n</code></pre> <ul> <li>Add Filler Cells</li> </ul> <pre><code>setFillerMode -scheme locationFirst \\\n                        -minHole true \\\n                        -fitGap true \\\n                        -diffCellViol true\n\naddFiller -cell $rm_fill_cells\necoRoute -fix_drc\n\nsetFillerMode -ecoMode true\naddFiller -fixDRC -fitGap -cell $rm_fill_cells\n</code></pre> <ul> <li>Create P/G Pins<ul> <li>\u5728\u6b64\u5904\u5b9a\u4e49\u7684P/G\u7ba1\u811a\u4e0e\u6b64\u524d\u5b9a\u4e49\u7684\u6700\u9876\u5c42\u7684Power Stripe\u91cd\u53e0\u3002\u5728\u6b64\u4f8b\u4e2d\uff0c\u662fM8\u5c42\u91d1\u5c5e\u3002</li> </ul> </li> </ul> <pre><code># create PG Pins\nfor { set i 0} {$i &lt;= 22 } {incr i} {\n    set initX [expr 10 + $i * 40]\n    set initY 3.5\n    set stripeHeight 843\n    set stripeWidth 2   \n    createPGPin VDD -geom M8 $initX $initY [expr $initX + $stripeWidth] [expr $initY + $stripeHeight]\n}\n\nfor { set i 0 } {$i &lt;= 22 } {incr i} {\nset initX [expr 20 + $i * 40]\nset initY 3.5\nset stripeHeight 843\nset stripeWidth 2  \ncreatePGPin VDD -geom M8 $initX $initY [expr $initX + $stripeWidth] [expr $initY + $stripeHeight]\n}\n</code></pre> <ul> <li>Generate Files</li> </ul> <pre><code>write_lef_abstract -5.8 -specifyTopLayer M8 \\\n                    -PGpinLayers {M8} -stripePin \\\n                    -cutObsMinSpacing \\\n                ../models/lef/${rm_core_top}.lef\n\nwrite_sdf -min_view ff_0p88v_125c_view \\\n        -typ_view tt_0p80v_25c_view \\\n        -max_view ss_0p72v_m40c_view \\\n        -recompute_parallel_arcs ../models/sdf/${rm_core_top}.sdf\n\nwrite_sdc ../models/sdc/${rm_core_top}.sdc\n\nstreamOut -mapFile ${rm_lef_layer_map} ../data/${rm_core_top}.gds2 -mode ALL \\\n        -merge \"/work/home/wumeng/pdks/tsmc/tsmc22ull/tcbn22ullbwp7t30p140lvt_110a/digital/Back_End/gds/tcbn22ullbwp7t30p140lvt_110a/tcbn22ullbwp7t30p140lvt.gds\"\n        /path/to/my/sram/gds \\\n        /path/to/my/macro/gds\" \n\nsaveNetlist ../data/${rm_core_top}.pg.flat.v -flat -phys -excludeLeafCell -excludeCellInst $lvs_exclude_cells\n</code></pre> <ul> <li>Signoff</li> </ul> <pre><code># save the design for signoff\nsaveDesign ${rm_core_top}.signoff.enc\n\nset stop_time [clock seconds]\nset elapsedTime [clock format [expr $stop_time - $start_time] -format %H:%M:%S -gmt true]\nputs \"==============================================\"\nputs \"        Elapsed runtime : $elapsedTime\"\nputs \"==============================================\"\n\ndate\n</code></pre>"},{"location":"4_innovus_backend_workflow/#_4","title":"\u4e00\u4e9b\u5e38\u89c1\u62a5\u9519\u8bf4\u660e","text":""},{"location":"4_innovus_backend_workflow/#impsp-9099","title":"IMPSP-9099","text":"<ul> <li>ERROR: (IMPSP-9099): Scan chains exist in this design but are not defined for xx% flops</li> <li>\u5728<code>placeDesign</code>\u6b65\u9aa4\u4e2d\u9047\u5230\u4e86\u8fd9\u4e2a\u62a5\u9519\u3002</li> <li>\u626b\u63cf\u94fe\uff08Scan Chain\uff09\u662f\u4e00\u79cd\u5e38\u7528\u7684\u6570\u5b57\u96c6\u6210\u7535\u8def\uff08IC\uff09\u6d4b\u8bd5\u6280\u672f\uff0c\u5c5e\u4e8e\u8bbe\u8ba1\u53ef\u6d4b\u8bd5\u6027\uff08Design for Testability, DFT\uff09\u7684\u8303\u7574\u3002\u626b\u63cf\u94fe\u6280\u672f\u662f\u4e3a\u4e86\u7b80\u5316\u6570\u5b57\u903b\u8f91\u7535\u8def\u7684\u6d4b\u8bd5\u800c\u5f15\u5165\u7684\uff0c\u5b83\u53ef\u4ee5\u8ba9\u6d4b\u8bd5\u4eba\u5458\u66f4\u5bb9\u6613\u5730\u8bbf\u95ee\u548c\u63a7\u5236\u82af\u7247\u5185\u90e8\u7684\u89e6\u53d1\u5668\uff08Flip-Flops\uff09</li> <li>\u53ef\u80fd\u7684\u89e3\u51b3\u65b9\u6cd5\uff1a<ul> <li>\u5728<code>placeDesign</code>\u524d\u6dfb\u52a0\u53c2\u6570\u9009\u9879\uff1a<code>setPlaceMode -place_global_ignore_scan false</code></li> <li>\u53c2\u8003\u8fd9\u7bc7\u8bba\u575b\u63d0\u95ee</li> </ul> </li> <li>\u4e0d\u7406\u4f1a\u8fd9\u4e2a\u62a5\u9519\u4e5f\u4e0d\u5f71\u54cd\u540e\u7eed\u6d41\u7a0b</li> </ul>"},{"location":"5_virtuoso_verification/","title":"Virtuoso Verfication Workflow","text":"<p>\u5728Innovus\u5b8c\u6210\u6240\u6709\u7684Place &amp; Route\u5e76\u4fee\u590d\u57fa\u672c\u4e0a\u6240\u6709\u7684DRC\u4e4b\u540e\uff0c\u4f7f\u7528Virtuoso\uff1a * \u4fee\u590d\u5269\u4f59\u6216\u65b0\u589e\u7684DRC * \u68c0\u67e5LVS</p>"},{"location":"5_virtuoso_verification/#virtuoso","title":"\u5c06\u8bbe\u8ba1\u5bfc\u5165Virtuoso","text":"<ul> <li>\u5728Innovus\u6d41\u7a0b\u4e2d\uff0c\u901a\u8fc7\u5982\u4e0b\u7684\u547d\u4ee4\u5bfc\u51faGDS\u6587\u4ef6\u548c\u95e8\u7ea7\u7f51\u8868\u3002<ul> <li>\u5982\u679c\u8bbe\u8ba1\u4e2d\u4f7f\u7528\u4e86SRAM/Register File\u6216\u5b50\u6a21\u5757\uff0c\u9700\u8981\u5728<code>-merge</code>\u9009\u9879\u4e2d\u628aMacro\u7684<code>gds</code>\u6216<code>gds2</code>\u6587\u4ef6\u8def\u5f84\u6dfb\u52a0\u8fdb\u6765\u3002 </li> </ul> </li> </ul> <pre><code>streamOut -mapFile ${rm_lef_layer_map} ../data/${rm_core_top}.gds2 -mode ALL \\\n        -merge \"/work/home/wumeng/pdks/tsmc/tsmc22ull/tcbn22ullbwp7t30p140lvt_110a/digital/Back_End/gds/tcbn22ullbwp7t30p140lvt_110a/tcbn22ullbwp7t30p140lvt.gds \\\n        /path/to/my/sram/gds \\\n        /path/to/my/register_file/gds \\\n        /path/to/my/macro/gds\" \n\nsaveNetlist ../data/${rm_core_top}.pg.flat.v -flat -phys -excludeLeafCell -excludeCellInst $lvs_exclude_cells\n</code></pre> <ul> <li>\u65b0\u5efa\u4e00\u4e2a\u5b58\u653eVirtuoso\u5de5\u7a0b\u6587\u4ef6\u7684\u6587\u4ef6\u5939\uff0c\u5728\u5176\u4e2d<code>b virtuoso</code>\u6253\u5f00Virtuoso</li> <li>\u6253\u5f00Library Manager\uff0c\u786e\u4fdd\u8bbe\u8ba1\u6240\u9700\u8981\u7684\u5de5\u827a\u5e93(\u4f8b\u5982<code>tsmcN22</code>)\u5728Virtuoso\u641c\u7d22\u8def\u5f84\u4e2d</li> <li>\u4f7f\u7528Library Manager\u65b0\u5efa\u4e00\u4e2aLibrary\u7528\u4e8e\u5b58\u653e\u5b8c\u6210\u540e\u7aef\u6d41\u7a0b\u7684\u8bbe\u8ba1</li> <li>\u9009\u62e9<code>Attach to an existing technology library</code>\uff0c\u5e76\u9009\u62e9\u76f8\u5e94\u7684\u5de5\u827a\u5e93(\u4f8b\u5982<code>tsmcN22</code>)\u3002</li> <li>\u5728Virtuoso\u7a97\u53e3\u4e0a\u65b9\u9009\u62e9<code>File</code>-&gt;<code>Import</code>-&gt;<code>Stream</code></li> <li>\u5728Innovus\u7684\u8f93\u51fa\u6587\u4ef6\u5939\u4e2d\u6dfb\u52a0<code>&lt;MY_MODULE&gt;.gds2</code>\u6587\u4ef6\uff0c\u6dfb\u52a0\u5230\u6b64\u524d\u65b0\u5efa\u7684Library\u4e2d\uff0c\u5e76\u9009\u62e9\u6240\u4ece\u5c5e\u7684\u5de5\u827a\u5e93\uff0c\u6309\u4e0b\u65b9<code>Translate</code>\u6309\u94ae\u5bfc\u5165\u8bbe\u8ba1</li> <li> <p>\u5728Virtuoso\u7a97\u53e3\u4e0a\u65b9\u9009\u62e9<code>File</code>-&gt;<code>Open</code>\u6253\u5f00\u9876\u5c42\u6a21\u5757\u7684Layout</p> </li> <li> <p>\u6700\u5c0f\u683c\u70b9\u8bbe\u7f6e\uff1a\u4e3a\u4e86\u5728Virtuoso\u4e2d\u6b63\u5e38\u9009\u4e2d\u5668\u4ef6\uff0c\u8fdb\u884c\u5404\u79cd\u64cd\u4f5c\uff0c\u9700\u8981\u5728Layout Suite L\u4e0a\u65b9\u9009\u62e9<code>Options</code>-&gt;<code>Display</code>\uff0c\u628a<code>X Snap Spacing</code>\u548c<code>Y Snap Spacing</code>\u6539\u62100.005</p> </li> </ul>"},{"location":"5_virtuoso_verification/#lvs","title":"\u68c0\u67e5LVS","text":"<ul> <li>LVS\u5168\u79f0\u662fLayout Versus Schematic\uff0c\u7ffb\u8bd1\u4e3a\u7248\u56fe\u4e0e\u539f\u7406\u56fe\u4e00\u81f4\u6027\u68c0\u67e5\u3002</li> <li>LVS\u68c0\u67e5\u7684\u662f\u76ee\u524d\u7684\u7248\u56fe\u4e0e\u95e8\u7ea7\u7f51\u8868\u6240\u4ee3\u8868\u7684\u903b\u8f91\u662f\u5426\u4e00\u81f4\u3002\u5982\u679c\u662f\u4e00\u81f4\u7684\uff0c\u90a3\u4e48\u8bf4\u660e\u7269\u7406\u7248\u56fe\u4e0e\u7535\u8def\u539f\u7406\u56fe\u4e00\u81f4\uff0c\u4e5f\u5c31\u662fInnovus\u7684\u540e\u7aef\u6d41\u7a0b\u65e0\u8bef\u3002</li> <li>\u5c06\u95e8\u7ea7\u7f51\u8868<code>.v</code>\u8f6c\u6362\u6210<code>.cdl</code>\u683c\u5f0f<ul> <li>\u9700\u8981\u5728<code>./cadence/v2lvs.run</code>\u6587\u4ef6\u4e2d\u6dfb\u52a0\u76f8\u5e94\u5de5\u827a\u5e93\u7684SPICE\u6587\u4ef6\uff0c\u968f\u540e\u8fd0\u884c\u5982\u4e0b\u6307\u4ee4</li> </ul> </li> </ul> <pre><code>cd ./cadence\nb ./v2lvs.run\n</code></pre> <ul> <li>\u5bfc\u5165LVS Runset\u6587\u4ef6<ul> <li>\u5728Virtuoso\u7a97\u53e3\u4e0a\u65b9\u9009\u62e9<code>Calibre</code>-&gt;<code>nmLVS</code></li> <li>\u5728<code>Runset File Path</code>\u4e2d\u6dfb\u52a0Calibre\u6587\u4ef6</li> </ul> </li> <li>\u5728\u5de6\u4fa7<code>Inputs</code>-&gt;<code>Netlist</code>\u4e2d\u9009\u62e9\u5bfc\u5165<code>.cdl</code>\u683c\u5f0f\u7684SPICE\u6587\u4ef6</li> <li>\u5728\u5de6\u4fa7<code>LVS Options</code>-&gt;<code>Supply</code>\u4e2d\u5b9a\u4e49Power nets\u4e0eGround nets</li> <li>\u5982\u6709\u9700\u8981\uff0c\u5728\u5de6\u4fa7\u5404\u4e2a\u9009\u62e9\u4e2d\u8bbe\u7f6e\u76f8\u5e94\u7684\u9009\u9879</li> <li>\u5728\u4e0a\u65b9<code>File</code>-&gt;<code>Save Runset As</code>\u4fdd\u5b58LVS\u7684\u914d\u7f6e\uff0c\u4ee5\u4fbf\u540e\u7eed\u4f7f\u7528</li> </ul>"},{"location":"5_virtuoso_verification/#drc","title":"\u68c0\u67e5DRC","text":"<ul> <li>DRC\u5168\u79f0\u4e3aDesign Rule Check\uff0c\u68c0\u67e5\u7684\u662f\u76ee\u524d\u7684\u7248\u56fe\u4e2d\u5404\u4e2a\u5668\u4ef6\u3001\u5e03\u5c40\u5e03\u7ebf\u7684\u6446\u653e\u3001\u95f4\u8ddd\u3001\u5bc6\u5ea6\u7b49\u6307\u6807\u662f\u5426\u6ee1\u8db3\u6676\u5706\u5382\u7684\u89c4\u8303\u3002</li> <li>\u7406\u60f3\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u4e0d\u9700\u8981\u5728Virtuoso\u4e2d\u4fee\u6539DRC\u62a5\u9519\uff0c\u6211\u4eec\u5e0c\u671b\u80fd\u591f\u4f7f\u7528Innovus\u63d0\u4f9b\u7684\u5de5\u5177\u81ea\u52a8\u4feeDRC \u76f8\u5173\u5185\u5bb9\u8be6\u89c1innovus_backend_workflow.md\u4e2d\u7684\u76f8\u5173\u5185\u5bb9\u3002</li> </ul>"}]}